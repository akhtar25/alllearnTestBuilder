{%extends "layout.html"%} {%block content%}
<script src="https://unpkg.com/@daily-co/daily-js"></script>
<!--<script src="../static/js/painterro-1.0.35.min.js"></script>-->
<!--<script src="../shared-assets/create-demo-room.js"></script>-->
<style>

    button {
        display: block;
    }

    #page-blocks {
        height: 100%;
        display: flex;
        flex-direction: column;
    }

    #page-blocks>div {
        margin-top: 1em;
    }

    #create-a-room {
        flex: none;
    }

    #create-a-room>div {
        margin-top: 0.25em;
    }

    #meeting-info-row {
        flex: none;
        display: flex;
    }

    #meeting-info-row>div {
        flex: auto;
    }

    #buttons-row {
        flex: none;
        display: flex;
    }

    #buttons-row>div {
        flex: auto;
    }

    #call-frame-container {
        flex-grow: 1;
        /* set position and height so this is the "css container" for the iframe */
        position: relative;

        height: 500px;

        width: 100%;
    }

    .info>div {
        margin: 0.25em;
    }

    .info>div:nth-of-type(2) {
        font-size: 80%;
    }

    .info>div>div {
        margin: 0.25em;
    }

    .flex-bins {
        display: flex;
        flex-basis: auto;
    }

    .flex-bin {
        flex-basis: auto;
    }

    .disabled {
        pointer-events: none;
        opacity: 0.5;
    }
    #myCanvas {
	cursor: crosshair;
   
}
</style>

<script>
    function showEvent(e) {
        console.log('callFrame event', e)
    }
    async function createRoom() {
        room = {
            url: 'https://alllearn.daily.co/3JxJF9RMfaH5xPIEAI0W'
        }
        ownerLink = room.url;
    }

    async function createFrame() {
        //
        // ask the daily-js library to create an iframe inside the
        // 'call-frame-container' div
        //
        let customLayout = '',
            cssFile = customLayout ? '../static/css/basics.css' : null;
        callFrame = window.DailyIframe.createFrame(
            document.getElementById('call-frame-container'), {
                customLayout,
                cssFile
            }
        );

        callFrame.on('loading', (e) => {
            showEvent(e);
            $('#leave-meeting').show();
            buttonDisable('join-meeting');
        });

        callFrame.on('loaded', showEvent)
            .on('started-camera', showEvent)
            .on('camera-error', showEvent)
            .on('joining-meeting', showEvent)
            .on('recording-stats', showEvent)
            .on('recording-error', showEvent)
            .on('app-message', showEvent)
            .on('input-event', showEvent)
            .on('error', showEvent);

        callFrame.on('joined-meeting', (e) => {
            showEvent(e);
            $('#leave-meeting').show();
            buttonEnable('leave-meeting'); //, 'toggle-local-cam', 'toggle-local-mic',
            //             'start-recording', 'start-screenshare');
        });
        callFrame.on('left-meeting', (e) => {
            showEvent(e);
            buttonDisable('leave-meeting');
            buttonEnable('join-meeting');
            $('#blankClassDiv').show();
            $('#call-frame-container').hide();

        });
        $('#blankClassDiv').hide();
    }

    async function createFrameAndRoom() {
        document.getElementById('create-a-room').style.display = 'none';
        await createRoom();
        await createFrame();
        buttonEnable('join-meeting');
    }

    async function joinBTNClick() {
        //document.getElementById('create-a-room').style.display = 'none';
        $('#call-frame-container').show();
        //$('#blankClassDiv').html('<h3 class="grey-text">Loading...</h3>');
        await createRoom();
        await createFrame();
        callFrame.join({
            url: ownerLink
        });
        buttonDisable('join-meeting');
    }

    function updateRoomInfoDisplay() {
        let roomInfo = document.getElementById('meeting-room-info');
        roomInfo.innerHTML = `
            <div><b>room info</b></div>
            <div>
              send to invite or click to join
              <div><a href="${room.url}" target="_blank">
                ${room.url.replace('.co/', '.co/&#8203;')}
              </a></div>
              <div id='expires-countdown'></div>
            </div>
          `;
        if (!window.expiresUpdate) {
            window.expiresUpdate = setInterval(() => {
                let exp = (room && room.config && room.config.exp);
                if (exp) {
                    document.getElementById('expires-countdown').innerHTML = `
                   room expires in 
                     ${Math.floor((new Date(exp*1000) - Date.now())/1000)}
                   seconds
                 `;
                }
            }, 1000);
        }
    }

    function toggleCam() {
        callFrame.setLocalVideo(!callFrame.participants().local.video);
    }

    function toggleMic() {
        callFrame.setLocalAudio(!callFrame.participants().local.audio);
    }

    //
    // UI utility functions
    //
    function buttonEnable(...args) {
        args.forEach((id) => {
            let el = document.getElementById(id);
            if (el) {
                el.classList.remove('disabled');
            }
        });
    }

    function buttonDisable(...args) {
        args.forEach((id) => {
            let el = document.getElementById(id);
            if (el) {
                el.classList.add('disabled');
            }
        });
    }
</script>

<div class="container">

    <div class="row">
        <h3>Learning the technologies</h3>
        <h5>Starting a saas startup in India </h5>

    </div>
    <div class="row">
        <div id="page-blocks">
            <div id="buttons-row">
                <div class="">
                    <button id="join-meeting" class="btn cyan" onclick='joinBTNClick();'>
                        Start Class
                    </button>
                    <button id="whiteboardBTN" class="btn  right">WhiteBoard</button>
                    <button id="leave-meeting" class="btn red lighten-1  " onclick="callFrame.leave()">
                        End Class and Start Quiz
                    </button>

                </div>
            </div>
        </div>
    </div>
    <div class="row hoverable z-depth-1"
        style="border-radius: 25px;border: 2px solid rgb(226, 223, 223);padding: 10px; ">
        <div class="section" id="mainDiv">
        <div id="blankClassDiv" class="center">
            <h2 class="grey-text">Please click on Start Class to enter classroom</h2>

            <img src="../static/images/blkboard.jpg" width="95%">

        </div>
        <div id="call-frame-container">
        </div>
    </div>
        <div class="section">
            <div id="whiteboardDiv">
                <h3>
                    Whiteboard
                </h3>
                <canvas id="myCanvas" style="height: 100%;width: 100%;">
                    Sorry, your browser does not support HTML5 canvas technology.
                </canvas>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-8">
            <h4>Notes</h4>
            <p>This is the list of items you should ideally read</p>
            <table class=" highlight " style="font-size:16px;border-radius: 10px;max-width: 80%;">
                <tr>
                    <!--  <td></td>-->
                    <td><a href="#">Notes on Python flask</a></td>
                </tr>
                <tr>
                    <td><a href="#">What is the reason for quick build</a></td>
                </tr>
                <tr>
                    <td><a href="#">Sample code on python flask</a></td>
                </tr>
                <tr>
                    <td><a href="#">Building a business with python</a></td>
                </tr>
                <tr>
                    <td><a href="#">Building a business with python</a></td>
                </tr>
            </table>
            <div class="divider"></div>
            <h4>Comments <span class="grey-text">475</span></h4>

            <div id="commentsDiv">
                <form id="remarkForm" style="max-width: 600px;">
                    <label for="remark">Add Comment</label>
                    <input type="text" id="remark" name="remark">
                    <a href="#" id="remarkPostButton" class="btn green right">Add</a>
                </form>
                <div id="insideCommentDiv" style="max-height: 350px;width:500px;overflow-y: auto;">
                    <table id="commentTable">
                        <tbody>

                            <!--Dummy comment-->
                            <tr>
                                <td>
                                    <div class=" green lighten-5"
                                        style="font-family: Arial;border-radius: 10px;max-width: 450px;word-wrap: break-word;">
                                        <span class="grey-text">Tomato master</span><br>
                                        <span style="margin-left: 5px;">This is the best course ever!!!</span><br>
                                    </div>
                                    <span class="right grey-text"> 23rd Jan 2020</span>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class=" green lighten-5"
                                        style="font-family: Arial;border-radius: 10px;max-width: 450px;word-wrap: break-word;">
                                        <span class="grey-text">Tomato slave</span><br>
                                        <span style="margin-left: 5px;">Definitely!</span><br>
                                    </div>
                                    <span class="right grey-text"> 23rd Jan 2020</span>
                                </td>
                            </tr>
                            <!--End of dummy comment-->
                        </tbody>
                    </table>
                    <br>
                </div>

            </div>

        </div>
        <div class="col-sm-4">
            <img src="../static/images/reviewIMG.PNG" width="120px">
            <br>
            <button class="btn wave green">Donate</button>
            <a href="#" class="btn cyan"><span>Share course</span> </a>
            <a href="#" class="right red-text">Report </a>
            <br><br>
            <p class="grey-text">While all the classes on this platform are free to ensure that everyone has access to knowledge, 
                creating a course can be a painstalking task and as a way to appreciate the hard work done in the course you liked, do donate to the teacher.</p>
                <br>
            <h4>Ongoing Classes</h4>
            <img class="hoverable" src="../static/images/otherCourse1.PNG" width="350px"
                style="border-radius: 10px;"><br><br>
            <img class="hoverable" src="../static/images/otherCourse2.PNG" width="350px"
                style="border-radius: 10px;"><br><br>
            <img class="hoverable" src="../static/images/otherCourse1.PNG" width="350px"
                style="border-radius: 10px;"><br><br>
            <img class="hoverable" src="../static/images/otherCourse2.PNG" width="350px"
                style="border-radius: 10px;"><br><br>
            <img class="hoverable" src="../static/images/otherCourse1.PNG" width="350px"
                style="border-radius: 10px;"><br><br>
            <img class="hoverable" src="../static/images/otherCourse2.PNG" width="350px"
                style="border-radius: 10px;"><br><br>
        </div>
    </div>
    <div class="row">

    </div>

    <!--<div id="create-a-room">
        <button onclick="createFrameAndRoom()" class="green btn">create a room</button>
    </div>-->


</div>
<script>
    $(document).ready(function () {
        $('#leave-meeting').hide();
        $('#call-frame-container').hide();
        $('#whiteboardDiv').hide();          
    });
    //$('#whiteboardBTN').click(function () {
    //    if ($('#whiteboardDiv').attr('display','none')){
    //    $('#whiteboardDiv').show();
    //    $('#call-frame-container').hide();
    //    //}
    //    //else{
//
    //    //}
    //});

    $('#whiteboardBTN').click(function () {
        //if ($('#whiteboardDiv').attr('display','none')){
          //  window.alert('hello');
        $('#whiteboardDiv').toggle();
        $('#mainDiv').toggle();
        //}
        //else{
        //    $('#whiteboardDiv').hide();
        //    $('#mainDiv').show();
        //}
        
    //$('#canvas').drawr('start');
    });
</script>
<script>
    window.onload = function() {
	var myCanvas = document.getElementById("myCanvas");
	var ctx = myCanvas.getContext("2d");
    
    // Fill Window Width and Height
    myCanvas.width = window.innerWidth;
	myCanvas.height = window.innerHeight;
	
	// Set Background Color
    ctx.fillStyle="#fff";
    ctx.fillRect(0,0,myCanvas.width,myCanvas.height);
	
    // Mouse Event Handlers
	if(myCanvas){
		var isDown = false;
		var canvasX, canvasY;
		ctx.lineWidth = 5;
		
		$(myCanvas)
		.mousedown(function(e){
			isDown = true;
			ctx.beginPath();
			canvasX = e.pageX - myCanvas.offsetLeft;
			canvasY = e.pageY - myCanvas.offsetTop;
			ctx.moveTo(canvasX, canvasY);
		})
		.mousemove(function(e){
			if(isDown !== false) {
				canvasX = e.pageX - myCanvas.offsetLeft;
				canvasY = e.pageY - myCanvas.offsetTop;
				ctx.lineTo(canvasX, canvasY);
				ctx.strokeStyle = "#000";
				ctx.stroke();
			}
		})
		.mouseup(function(e){
			isDown = false;
			ctx.closePath();
		});
	}
	
	// Touch Events Handlers
	draw = {
		started: false,
		start: function(evt) {

			ctx.beginPath();
			ctx.moveTo(
				evt.touches[0].pageX,
				evt.touches[0].pageY
			);

			this.started = true;

		},
		move: function(evt) {

			if (this.started) {
				ctx.lineTo(
					evt.touches[0].pageX,
					evt.touches[0].pageY
				);

				ctx.strokeStyle = "#000";
				ctx.lineWidth = 1;
				ctx.stroke();
			}

		},
		end: function(evt) {
			this.started = false;
		}
	};
	
	// Touch Events
	myCanvas.addEventListener('touchstart', draw.start, false);
	myCanvas.addEventListener('touchend', draw.end, false);
	myCanvas.addEventListener('touchmove', draw.move, false);
	
	// Disable Page Move
	document.body.addEventListener('touchmove',function(evt){
		evt.preventDefault();
	},false);
};
</script>
{%endblock%}