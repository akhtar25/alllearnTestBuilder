{% extends "layout.html" %} {% block content %}

<div class="container ">
    <!--This section is fo subscription plans-->

    <!-- <div class="row">
        <div class="section">
            <h2 class="grey-text textCenter">Syllabus</h2>
        </div>
    </div> -->
    <div class="row" id="titleSyllabus">
            <h2 class="grey-text">Syllabus</h2>
        <div class="col lg s12" id="unselect">
            <ul class="tabs">
                <li class="tab col s6">
                    <a href="#" id="general" class="tabFont">General</a>
                </li>
                <li class="tab col s6">
                    <a href="" id="specificSchool" class="tabFont">{{school_name}}</a>
                </li>
            </ul>
        </div>
    </div>
    <div class="row">
        <div class="section1">
            <section class="plans-container" id="plans">
                <h2 class="textCenter">General</h2>
                <article class="col s12 m6 l2 ">
                    <div class="card  z-depth-4">
                        <div class="card-image">
                        </div>
                        <div class="card-content ">
                            <div class="card-title">Boards</div>

                            <ul class="collection " id="boardDiv">
                                <a href="#">
                                    <li class="collection-item" id="">
                                        {{boardRows}}</li>
                                </a>
                            </ul>
                        </div>
                    </div>
                </article>
                <article class="col s12 m6 l2 ">
                    <div class="card  z-depth-4">
                        <div class="card-image">
                        </div>
                        <div class="card-content ">
                            <div class="card-title">Classes</div>
                            <ul class="collection " id="">

                            </ul>
                        </div>

                    </div>
                </article>
                <article class="col s12 m6 l2 ">
                    <div class="card  z-depth-4">
                        <div class="card-image">
                        </div>
                        <div class="card-content ">
                            <div class="card-title">Subjects</div>


                            <ul class="collection " id="">

                            </ul>
                            <div id='' style="display: none;">
                            <div id=""></div>
                            </div>
                        </div>

                    </div>
                </article>
                <article class="col s12 m6 l2 ">
                    <div class="card  z-depth-4">
                        <div class="card-image">
                        </div>
                        <div class="card-content ">
                            <div class="card-title">Books</div>


                            <ul class="collection " id="">
                            </ul>
                            <div id='' style="display: none;">
                                <div id="dataBook"></div>
                                </div>                        
                            </div>
                    </div>
                </article>
                <article class="col s12 m6 l2 ">
                    <div class="card  z-depth-4">
                        <div class="card-image">
                        </div>
                        <div class="card-content ">
                            <div class="card-title">Chapters</div>


                            <ul class="collection " id="">
                            </ul>
                            <div id='' style="display: none;">
                                <div id="dataChapter"></div>
                                </div>                        
                            </div>

                    </div>
                </article>
                <article class="col s12 m6 l2 ">
                    <div class="card  z-depth-4">
                        <div class="card-image">
                        </div>
                        <div class="card-content ">
                            <div class="card-title">Topics</div>
                            <ul class="collection " id="">
                            </ul>
                            <div id='' style="display: none;">
                                <div id="dataTopics"></div>
                                </div>                       
                             </div>
                    </div>
                </article>
            </section>
        </div>

        <!-- for Specific School Tab -->

        <div class="section2">
                <h2 class="textCenter">{{school_name}}</h2>
                <section class="plans-container" id="plans">
                        
                    <article class="col-md-2 col-xl-2">
                            
                        <div class="card  z-depth-4">
                            <div class="card-image">
                                
                            </div>
                            <div class="card-content ">
                                <div class="card-title">Boards</div>
    
                                <ul class="collection " id="boardDiv">
                                        <li class="collection-item boardClass" id="{{boardRowsId}}">
                                            {{boardRows}}
                                        </li>
                                </ul>
                            </div>
                        </div>
                    </article>
                    <article class="col s12 m6 l2 ">
                        <div class="card  z-depth-4">
                            <div class="card-image">
                            </div>
                            <div class="card-content ">
                                <div class="card-title">Classes</div>
                                <ul class="collection " id="classDiv" style="display:none;">
    
                                </ul>
                                <div id="classloader" style="display: none;">
                                    <img src="../static/images/smallLoader.gif" style="width:100%">
                                </div>
                            </div>
    
                        </div>
                    </article>
                    <article class="col s12 m6 l2 ">
                        <div class="card  z-depth-4">
                            <div class="card-image">
                            </div>
                            <div class="card-content ">
                                <div class="card-title">Subjects</div>
    
                                <div id='divSubject' style="display: none;">
                                <ul class="collection " id="subjectDiv" style="max-height:380px;position:relative;overflow-y:auto">
    
                                </ul>
                                <div class="remSubject" style="display:none;">
                                <span class="sugText">Suggestion</span>
                                <ul class="collection" id="remSub">
                                
                                </ul>
                                <a href="#" id="other">Add New Subject</a>
                                <input type="text" placeholder="Enter Subject Name" style="display:none;" id="subText">
                                </div>
                                <div class="subCol" onclick="remSubList();">
                                <i class="fas fa-plus-circle"></i>
                                </div>
                                <div class="addSubBtn" style="display:none;text-align:center;">
                                <button style="border-radius:15px;" class="btn waves-light green lighten-1 white-text" type="button" id="suggestionBtn" onclick="addBtn();"><a href="#" style="color: white;">Add</a></button>
                                <button style="border-radius:15px;display:none;" class="btn waves-light green lighten-1 white-text" type="button" id="inputBtn" onclick="addInputBtn();"><a href="#" style="color: white;">Add</a></button>
                                </div>
                                </div>
                                </div>
                                <div id="subjectloader" style="display: none;">
                                    <img src="../static/images/smallLoader.gif" style="width:100%">
                                </div>
                                
                            </div>
    
                    </article>
                    <article class="col s12 m6 l2 ">
                        <div class="card  z-depth-4">
                                <div class="card-image">
                                </div>
                                <div class="card-content ">
                                    <div class="card-title">Books</div>
    
                                <div id='divBook' style="display: none;">
                                <ul class="collection " id="bookDiv" style="max-height:380px;position:relative;overflow-y:auto">
    
                                </ul>
                                <div class="remBooks" style="display:none;">
                                <span class="sugTextBooks">Suggestion</span>
                                <ul class="collection" id="rembok">
                                
                                </ul>
                                <a href="#" id="otherBook">Add other books</a>
                                <input type="text" placeholder="Enter Book Name" style="display:none;" id="bookText">
                                </div>
                                <div class="bookCol" onclick="remBookList();">
                                <i class="fas fa-plus-circle"></i>
                                </div>
                                <div class="addBookBtn" style="text-align:center;margin-top:5px;">
                                <button style="border-radius:15px;" class="btn waves-light green lighten-1 white-text" type="button" id="suggestionBookBtn" onclick="addBookBtn();"><a href="#" style="color: white;">Add</a></button>
                                <button style="border-radius:15px;display:none;" class="btn waves-light green lighten-1 white-text" type="button" id="inputBookBtn" onclick="addInputBookBtn();"><a href="#" style="color: white;">Add</a></button>
                                </div>
                                </div>
                                </div>
                                <div id="Bookloader" style="display: none;">
                                    <img src="../static/images/smallLoader.gif" style="width:100%">
                                </div>   
                                </div>
                    </article>
                    <article class="col s12 m6 l2 ">
                        <div class="card  z-depth-4">
                                <div class="card-image">
                                </div>
                                <div class="card-content ">
                                    <div class="card-title">Chapters</div>
    
                                <div id='divChapter' style="display: none;">
                                <ul class="collection " id="chapterDiv" style="margin-left:-5px;width:145px;max-height:380px;position:relative;overflow-y:auto">
    
                                </ul>
                                <a class="chapterCol modal-trigger" href="#modal1" onclick="onclickChapterAdd();remChapterList();">
                                <i class="fas fa-plus-circle"></i>
                                </a>
                                <!-- Model -->
                                    <div id="modal1" class="modal" style="width:42%;height:61%;overflow-y: auto;">
                                        <div class="modal-content">
                                          <div class="remchapters" style="display:none;">
                                            <span class="sugTextChapters">Choose existing chapters</span>
                                            <ul class="collection" id="remchapt" style="display:none;">
                                            
                                            </ul>
                                            <div id="remchaptloader" style="display:none;">
                                                <img src="../static/images/smallLoader.gif" style="width:25%">
                                            </div>
                                            <a href="#" id="otherChapter">Add new chapter</a></br>
                                            <a href="#" id="otherTopic" style="display:none;">Add new topic</a><br>
                                            <div class="newChapterDiv" style="display:none;">
                                            <span class="chapterTextlabel">Chapter</span></t><input type="text" style="width: 300px;margin-left:20px;margin-right:20px;" id="chapterFocus" class="chapterText"><span class="chapNoTextlabel">Ch no.</span><input type="text" style="width:50px;" class="chapNoText"></br>
                                            <span class="topicTextlabel">Topic</span></t><input type="text" style="width:400px;margin-left:35px;" class="topicText"><a id="addRowBtn1" class="iconAdd" style="display:none;" onclick="appendRow();"><i class="fas fa-plus-circle"></i></a></br>
                                            <div id="newTextbox"></div>
                                            </div>
                                            <span class="chapterTopic" style="display:none;">Choose topics</span>
                                            <ul class="collection" id="chooseTopic" style="display:none;">
                                
                                            </ul>
                                            <div id="chooseTopicloader" style="display:none;">
                                                <img src="../static/images/smallLoader.gif" style="width:25%">
                                            </div>
                                            <div id="msg" style="display:none;"></div>
                                          </div>
                                        </div>
                                        <div class="modal-footer">
                                            
                                          <div class="addChapterBtn" style="text-align:center;margin-top:5px;">
                                            <button style="border-radius:15px;width:100px;" class="btn waves-light green lighten-1 white-text" type="button" id="suggestionChapterBtn" onclick="addChapterBtn();"><a href="#" style="color: white;">Add</a></button>
                                            <button style="border-radius:15px;display:none;width:100px;" class="btn waves-light green lighten-1 white-text" type="button" id="inputChapterBtn" onclick="addInputChapterBtn();"><a href="#" style="color: white;">Add</a></button>
                                        </div>
                                        </div>
                                      </div>

                                      <!-- second Modal -->
                                           <div id="modal2" class="modal" style="width:52%;height:60%;">
                                        <div class="modal-content">
                                        <span id="heading">Questions</span>
                                            <ul class="collection" id="questions" style="max-height:285px;position:relative;overflow-y:auto;">
                                            
                                            </ul>
                                        </div>
                                        <div class="modal-footer">
                                        </div>
                                      </div>     
                                      <!-- End -->
                                <!-- End -->
                                
                                </div>
                                </div>
                                <div id="chapterloader" style="display: none;">
                                    <img src="../static/images/smallLoader.gif" style="width:100%">
                                </div>   
                                </div>
                    </article>
                    <article class="col s12 m6 l2 ">
                        <div class="card  z-depth-4">
                            <div class="card-image">
                            </div>
                            <div class="card-content ">
                                <div class="card-title">Topics</div>
                                <ul class="collection " id="topicDiv" style="display: none;max-height:380px;position:relative;overflow-y:auto">
                                </ul>
                                <a class="topicCol modal-trigger" href="#modal1" onclick="onclickTopicAdd();remChapterList();" style="display: none;">
                                    <i class="fas fa-plus-circle"></i>
                                </a>
                                 
                                 <div id="topicloader" style="display: none;">
                                        <img src="../static/images/smallLoader.gif" style="width:100%">
                                </div>
                                </div>
                        </div>
                    </article>
                </section>
            </div>
    </div>
</div>
<script>


    function onclickChapterAdd(){
        $('#modal1').css('height','61%');
        $('#otherChapter').show();
        $('#otherTopic').hide();
        $('.newChapterDiv').hide();
        $('.sugTextChapters').show();
        $('#remchapt').show();
        $('.chapterTopic').show();
        $('#chooseTopic').show();
        $('#suggestionChapterBtn').show();
        $('#inputChapterBtn').hide();
    }

    function onclickTopicAdd(){
        $('#modal1').css('height','61%');
        $('#otherChapter').hide();
        $('#otherTopic').show();
        $('.newChapterDiv').hide();
        $('.sugTextChapters').show();
        $('#remchapt').show();
        $('.chapterTopic').show();
        $('#chooseTopic').show();
        $('#suggestionChapterBtn').show();
        $('#inputChapterBtn').hide();
    }

    var x=1
    function appendRow()
    { var ids = '#addRowBtn'+x;
          $(ids).hide();
        var d = document.getElementById('newTextbox');
        console.log('inside appendRow');
        console.log(ids);
        x=x+1;
        d.innerHTML += "<input type='text' style='width:400px;margin-left:68px;' id='topic"+x+"' class='topicText'><a id='addRowBtn"+x+"' class='iconAdd' onclick='appendRow();'><i class='fas fa-plus-circle'></i></a></br>";
        
    }

  $(document).ready(function(){
    $('.modal').modal();
  });

    $(document).ready(function(){
    $('.tabs').tabs();
    $('.section1').hide();
      $('.section2').show();
  });

  $('#general').click(function(){
      console.log('inside general');
      $('.section2').hide();
      $('.section1').show();
  });
  $('#specificSchool').click(function(){
      console.log('inside specific School');
    $('.section1').hide();
      $('.section2').show();
  });

  $('#other').click(function(){
      $('.sugText').hide();
      $('#remSub').hide();
      $('#other').hide();
      $('#suggestionBtn').hide();
      $('#inputBtn').show();
      $('#subText').show();
      document.getElementById('subText').focus();
  });

  $('#otherBook').click(function(){
      $('#otherBook').hide();
      $('#bookText').show();
      $('.sugTextBooks').hide();
      $('#rembok').hide();
      $('#suggestionBookBtn').hide();
      $('#inputBookBtn').show();
       document.getElementById('bookText').focus();
  });
  $('#otherChapter').click(function(){
      $('#modal1').css('height','34%');
      $('#otherChapter').hide();
      $('#remchapt').hide();
      $('.sugTextChapters').hide();
      $('#suggestionChapterBtn').hide();
      $('#inputChapterBtn').show();
      $('#otherTopic').hide();
      $('.chapNoText').show();
      $('.newChapterDiv').show();
      $('.chapterTopic').hide();
      $('#chooseTopic').hide();
      $('#msg').hide();
      document.getElementById('chapterFocus').focus();
  });

  $('#otherTopic').click(function(){
        $('#modal1').css('height','34%');
      $('#otherChapter').hide();
      $('#otherTopic').hide();
      $('#remchapt').hide();
      $('.sugTextChapters').hide();
      $('#suggestionChapterBtn').hide();
      $('#inputChapterBtn').show();
      $('.newChapterDiv').show();
      $('.chapterTopic').hide();
      $('#chooseTopic').hide();
      $('#msg').hide();
      document.getElementById('chapterFocus').focus();
  });

  var selSub = [];
    var ul = document.getElementById('remSub');
      ul.onclick = function(event) {
      var target = event.target;
      console.log(event.target.innerHTML);
      selSub.push(event.target.innerHTML);
}; 
    var selectedChapters = [];
    var ul = document.getElementById('remchapt');
      ul.onclick = function(event) {
      var target = event.target;
      console.log(event.target.innerHTML);
      selectedChapters.push(event.target.innerHTML);
};

    var selectedTopics = [];
    var ul = document.getElementById('chooseTopic');
      ul.onclick = function(event) {
      var target = event.target;
      console.log(event.target.innerHTML); 
      selectedTopics.push(event.target.innerHTML);
};

    var selBok = [];
    var ul = document.getElementById('rembok');
      ul.onclick = function(event) {
      var target = event.target;
      console.log(event.target.innerHTML);
      selBok.push(event.target.innerHTML);
};

    function addChapterBtn(){
        console.log('inside add chapter btn');
        $('#chooseTopic').hide();
        $('.chapterTopic').hide();
        $('#divChapter').hide();
        $('#chapterloader').show();
        var chapter = '';
        for(var i=0;i<selectedChapters.length;i++){
        
        console.log('chapter name:'+selectedChapters[i]);
            chapter = selectedChapters[i];
        }
        for(var j=0;j<selectedTopics.length;j++){
        
        console.log('topic name:'+selectedTopics[i]);
        }
        $('.modal.open').modal('close');
        insertChapter(subjectforChapters,classforChapters,chapter,selectedTopics);
    }

    function deleteFunc(subjectId){
        console.log('inside delete function');
        console.log(subjectId);
        deleteSubject(subjectId,classforSubject,boardforSub);
        $('#remSub').hide();
        $('.addSubBtn').hide();
        $('.sugText').hide();
        $('#other').hide();
        $('#subjectloader').show();
    }

    function deleteBookFunc(bookId){
        console.log('inside book delete function');
        console.log(bookId);
        deleteBooks(bookId,subjectforBooks,classforBooks);
        $('#rembok').hide();
        $('.addBookBtn').hide();
    }

    function deleteChapterFunc(chapterNum){
        console.log('inside chapter delete function');
        console.log(chapterNum);
        deleteChapters(chapterNum,bookIdforChapters,subjectforChapters,classforChapters);

    }

    function deleteTopicFunc(topic_id){
        console.log('inside topic delete function');
        console.log(topic_id);
        deleteTopics(topic_id,classforTopics,subjectforTopics,chapterNumforTopics,bookIdforTopics);
    }

    function addInputChapterBtn(){
        console.log('inside add new chapter');
        
        var chapterName = $('.chapterText').val();
        var chapter_num = $('.chapNoText').val();
        console.log('chapter number:'+chapter_num);
        var res = checkForChapterNum(classforChapters,subjectforChapters,bookIdforChapters,chapter_num);
        
        
    }

    function addInputNewChapter(res){
        if(res){
            var chapterName = $('.chapterText').val();
            var chapter_num = $('.chapNoText').val();
            $('#divChapter').hide();
        $('#chapterloader').show();
        console.log('chapter number not exist');
        $('.modal.open').modal('close');
        var topic = $('.topicText').val();
        console.log('input chapter:'+chapterName);
        // console.log('input topic:'+topic);
        var topicArray = [];
        $(".topicText").each(function(){
        // console.log('Topics:'+$(this).val());
        var topic = $(this).val();
        console.log('Topics: '+topic)
        topicArray.push(topic);
        
        });
        insertNewChapter(subjectforChapters,classforChapters,bookIdforChapters,chapterName,chapter_num,topicArray);
        }else{
            console.log('inside else chapter number exist');
            $('#msg').html('<h5>chapter number already exist</h5>');
            $('#msg').show();
        }
    }

    function checkForChapterNum(class_val,subject,bookId,chapter_num){
        console.log('inside chapter number check');
        var result = '';
         $.ajax({
            url: "/checkForChapterNum?subject="+subject+"&class_val="+class_val+"&chapter_num="+chapter_num+"&bookId="+bookId,
            type: "POST",
            contentType: "application/json",
            data: "",
            success: function (response) {
                console.log('inside success of checkForChapterNum');
                console.log(response);
                result = response;
                addInputNewChapter(result);
                //   fetchSubject(classforSubject,boardforSub); 
                // fetchChapters(bookId,subject,class_val);
                // fetchChapters(bookIdforChapters,subjectforChapters,classforChapters);                        
            },
            error: function (xhr) {
                window.alert("error occurred while adding indivisual Subject");
            }
            
        });
        return result;
    }

    function addInputBookBtn(){
        $('#inputBookBtn').hide();
        $('#bookText').hide();
        $('#Bookloader').show();
        var book = $('#bookText').val();
        console.log('inside addInputBookBtn');
        console.log(book);
        insertNewBook(book,subjectforBooks,classforBooks);
    }

    function addInputBtn(){
        $('#inputBtn').hide();
        $('#subText').hide();
        $('#subjectloader').show();
        var subject = $('#subText').val();
        console.log('inside addInputBtn');
        console.log(subject);
        insertNewSubject(subject,classforSubject,boardforSub);
    }


  function addBookBtn(){
      console.log('inside addBookBtn');
      $('.remBook').hide();
      $('#divBook').hide();
      $('.sugTextBooks').hide();
      $('#rembok').hide();
      $('#otherBook').hide();
      $('.addBookBtn').hide();
      
      $('.subCol').hide();
      $('#Bookloader').show();
      for(var i=0;i<selBok.length;i++){
          console.log(selBok.length);
          console.log(selBok[i]);
            insertBook(selBok[i],classforBooks,subjectforBooks,i,selBok.length);
          console.log('after insert Book Data');
        }
  }

  function addBtn(){
      $('#divSubject').hide();
      $('.remSubject').hide();
      $('.addSubBtn').hide();
      $('.subCol').hide();
        $('#subjectloader').show();
      console.log('inside addBtn');
      for(var i=0;i<selSub.length;i++){
          console.log(selSub.length);
          console.log(selSub[i]);
            insertSubject(selSub[i],classforSubject,boardforSub,i,selSub.length);
          console.log('after insert Data');
        }
        // fetchSubject(classforSubject,boardforSub);
        
      
  }

  function deleteTopics(topic_id,class_val,subject,chapterNum,bookId){
      $.ajax({
            url: "/deleteTopics?subject="+subject+"&class_val="+class_val+"&bookId="+bookId+"&chapter_num="+chapterNum+"&topic_id="+topic_id,
            type: "POST",
            contentType: "application/json",
            data: "",
            success: function (response) {
                console.log(response);
                //   fetchSubject(classforSubject,boardforSub); 
                fetchTopics(boardforTopics,subjectIdforTopics,subjectforTopics,classforTopics,chapterNumforTopics,bookIdforTopics);                       
            },
            error: function (xhr) {
                window.alert("error occurred while adding indivisual Subject");
            }
        });
  }

  function deleteChapters(chapterNum,bookId,subject,class_val){
      $.ajax({
            url: "/deleteChapters?subject="+subject+"&class_val="+class_val+"&bookId="+bookId+"&chapter_num="+chapterNum,
            type: "POST",
            contentType: "application/json",
            data: "",
            success: function (response) {
                console.log(response);
                //   fetchSubject(classforSubject,boardforSub); 
                fetchChapters(classforChapters,subjectforChapters,subjectIdforChapters,bookIdforChapters,boardIdforChapters);                       
            },
            error: function (xhr) {
                window.alert("error occurred while adding indivisual Subject");
            }
        });
  }

  function deleteBooks(bookId,subject,class_val){
      $.ajax({
            url: "/deleteBook?subject="+subject+"&class_val="+class_val+"&bookId="+bookId,
            type: "POST",
            contentType: "application/json",
            data: "",
            success: function (response) {
                console.log(response);
                //   fetchSubject(classforSubject,boardforSub); 
                fetchBooks(classforBooks,subjectforBooks,subjectIdforBooks,boardforBooks);                       
            },
            error: function (xhr) {
                window.alert("error occurred while adding indivisual Subject");
            }
        });
  }

  function deleteSubject(subjectId,class_val,board){
      $.ajax({
            url: "/deleteSubject?subjectId="+subjectId+"&class_val="+class_val+"&board="+board,
            type: "POST",
            contentType: "application/json",
            data: "",
            success: function (response) {
                console.log(response);
                  fetchSubject(classforSubject,boardforSub);  

            },
            error: function (xhr) {
                window.alert("error occurred while adding indivisual Subject");
            }
        });
  }

  function insertNewChapter(subject,class_val,book_id,chapter,chapter_num,topics){
      topics = JSON.stringify(topics);
      $.ajax({
            url: "/addNewChapter?book_id="+book_id+"&class_val="+class_val+"&subject="+subject+"&chapter="+chapter+"&chapter_num="+chapter_num,
            type: "POST",
            contentType: "application/json",
            data: topics,
            success: function (response) {
                console.log(response);
                  fetchChapters(classforChapters,subjectforChapters,subjectIdforChapters,bookIdforChapters,boardIdforChapters);                        
            },
            error: function (xhr) {
                window.alert("error occurred while adding indivisual Subject");
            }
        });
  }

  function insertNewBook(book,subject,class_val){
      $.ajax({
            url: "/addNewBook?book="+book+"&class_val="+class_val+"&subject="+subject,
            type: "POST",
            contentType: "application/json",
            data: "",
            success: function (response) {
                console.log(response);
                  fetchBooks(classforBooks,subjectforBooks,subjectIdforBooks,boardforBooks);                        
            },
            error: function (xhr) {
                window.alert("error occurred while adding indivisual Subject");
            }
        });
  }

  function insertNewSubject(subjectName,class_val,board){
      $.ajax({
            url: "/addNewSubject?subject="+subjectName+"&class_val="+class_val+"&board="+board,
            type: "POST",
            contentType: "application/json",
            data: "",
            success: function (response) {
                console.log(response);
                  fetchSubject(classforSubject,boardforSub);                        
            },
            error: function (xhr) {
                window.alert("error occurred while adding indivisual Subject");
            }
        });
  }

  function insertChapter(subject,class_val,chapterName,topicName){
    //   chapterName = JSON.stringify(chapterName);
      topicName = JSON.stringify(topicName);
      $.ajax({
            url: "/addChapter?class_val="+class_val+"&subject="+subject+"&chapterName="+chapterName,
            type: "POST",
            contentType: "application/json",
            data: topicName,
            success: function (response) {
                fetchChapters(classforChapters,subjectforChapters,subjectIdforChapters,bookIdforChapters,boardIdforChapters);                     
            },
            error: function (xhr) {
                window.alert("error occurred while adding chapters");
            }
        });
  }

  function insertBook(bookName,class_val,subject,index,length){
      $.ajax({
            url: "/addBook?book="+bookName+"&class_val="+class_val+"&subject="+subject,
            type: "POST",
            contentType: "application/json",
            data: "",
            success: function (response) {
                console.log(response);
                if(index==length-1){
                 fetchBooks(classforBooks,subjectforBooks,subjectIdforBooks,boardforBooks); 
                 selBok = [];
                }                           
            },
            error: function (xhr) {
                window.alert("error occurred while adding indivisual Subject");
            }
        });
  }

  function insertSubject(subjectName,class_val,board,index,length){
      $.ajax({
            url: "/addSubject?subject="+subjectName+"&class_val="+class_val+"&board="+board,
            type: "POST",
            contentType: "application/json",
            data: "",
            success: function (response) {
                console.log(response);
                if(index==length-1){
                 fetchSubject(classforSubject,boardforSub); 
                 selSub = [];
                }                           
            },
            error: function (xhr) {
                window.alert("error occurred while adding indivisual Subject");
            }
        });
  }

  function fetchTopics(boardforTopics,subjectIdforTopics,subjectforTopics,classforTopics,chapterNumforTopics,bookIdforTopics){
      $.ajax({
            url: "/fetchTopics?class_val=" + classforTopics +
                "&subject=" + subjectforTopics + "&chapter_num=" + chapterNumforTopics+"&bookId="+bookIdforTopics,
            type: "get",
            data: '',
            success: function (response) {
                responseArr = response.toString().split(',');
                //alert(responseArr.length);
                var topicHTMLRecords = "";
                for (var i = 0; i < responseArr.length; i++) {
                    var topicID = responseArr[i].toString().split(':')[0];
                    var topicName = responseArr[i].toString().split(':')[1];
                    //alert(responseArr[i]);
                    topicHTMLRecords = topicHTMLRecords +
                        '<a href="#modal2" class="modal-trigger"><li class="topicItem" style="padding: 10px 5px;" name = "' +
                            topicID + '" id="' + topicID + 'topic" onClick=loadQuestions("' + topicID +'",'+classforTopics+','+subjectIdforTopics+','+boardforTopics+','+chapterNumforTopics+'); >' + topicName +
                        '</li></a><div class="delIconTopics" onclick=deleteTopicFunc('+topicID+'); style="margin-top:-30px;color:forestgreen;"><i class="fas fa-minus-circle" id="deleteIcon"></i></div>';
                }
                $("#topicDiv").html(topicHTMLRecords);
                
                
                $('#topicDiv').show();
                $('.topicCol').show();
                $('#topicloader').hide();
            },
            error: function (xhr) {
                window.alert("error occurred while fetching book list");
            }
        });
  }

  function fetchChapters(classforChapters,subjectforChapters,subjectIdforChapters,bookIdforChapters,boardIdforChapters){
      $.ajax({
          url: "/fetchChapters?class_val="+classforChapters+"&subject="+subjectforChapters+"&bookId="+bookIdforChapters,
          type: "POST",
          contentType: "application/json",
          data: "",
          success: function(response){
              
                // alert(responseArr.length);
                var chapterHTMLRecords = "";
                if(response){
                responseArr = response.toString().split(',');
                for (var i = 0; i < responseArr.length; i++) {
                    // alert(responseArr[i]);
                    var chapterNum = responseArr[i].toString().split(':')[0];
                    var chapterName = responseArr[i].toString().split(':')[1];
                    // var chapter = responseArr[i].toString().split(':')[1];
                    // alert(chapterNum + " and " + chapterName);
                    var parameters ="\""+chapterName + "\"" + "," + "\"" + subjectforChapters +"\"," + subjectIdforChapters + "," + classforChapters + "," + boardIdforChapters+","+chapterNum;
                    chapterHTMLRecords = chapterHTMLRecords +
                    '<a href="#"><li class="chapterColor chapterItem'+chapterNum+'" style="padding: 10px 5px;" id="'+chapterName+'" onClick=loadTopics("' + subjectforChapters +'",'+ subjectIdforChapters + ',' + classforChapters + ',' + boardIdforChapters+','+chapterNum+','+bookIdforChapters+'); >' + chapterName +
                            '</li><div class="delIconChapter" onclick=deleteChapterFunc('+chapterNum+'); style="margin-top:-30px;color:forestgreen;"><i class="fas fa-minus-circle" id="deleteIcon"></i></div></a>';
                }
                }else{
                    chapterHTMLRecords = chapterHTMLRecords + '<li style="padding: 10px 5px;">No data available</li>'
                }

                $("#chapterDiv").html(chapterHTMLRecords);
                $('#chapterloader').hide();
                $('#divChapter').show();
                $('.chapterCol').show()
                
                // $('.addChapterBtn').hide();
                // $('#chapterloader').hide();
            },
            error: function (xhr) {
                window.alert("error occurred while fetching book list");
            }
      });
  }

  function fetchBooks(class_val,subject,subjectIdforBooks,boardforBooks){
      $.ajax({
          url: "/fetchBooks?class_val="+class_val+"&subject="+subject,
          type: "POST",
          contentType: "application/json",
          data: "",
          success: function(response){
              console.log('inside fetch books success');
              var bookHTMLRecords = "";
              if(response){
              responseArr = response.toString().split(',');
                // alert(responseArr);
                
                for (var i = 0; i < responseArr.length; i++) {
                    //alert(responseArr[i]);
                    var bookID = responseArr[i].toString().split(':')[0];
                    var bookName = responseArr[i].toString().split(':')[1];
                    console.log('inside book syllabus:'+bookID);
                    var parameters = "\"" + subject +
                        "\"," + bookID+',' + subjectIdforBooks + ',' + class_val + ',' + boardforBooks;
                        console.log('Books Records in parameters:'+parameters);
                    bookHTMLRecords = bookHTMLRecords +
                        '<a href="#"><li class="bookItem" style="padding: 10px 5px;" id="'+bookID+'book" onClick=loadChapters(' +
                        parameters + '); name=' +
                        boardforBooks + '>' + bookName +
                        '</li></a><div class="delIconBooks" onclick=deleteBookFunc('+bookID+'); style="margin-top:-30px;color:forestgreen;"><i class="fas fa-minus-circle" id="deleteIcon"></i></div>';
                    // bookArray.push(bookID+':'+bookName);
                }
              }else{
                  bookHTMLRecords = bookHTMLRecords +
                  '<li style="padding: 10px 5px;">No data available</li>'
              }
                $('#bookDiv').html("");
                $("#bookDiv").html(bookHTMLRecords);
                $('#divBook').show();
                $('.bookCol').show();
                $('#Bookloader').hide();
            },
            error: function (xhr) {
                window.alert("error occurred while fetching book list");
            }
      });
  }

  function fetchSubject(class_val,board){
      $.ajax({
            url: "/fetchSubjects?class_val="+class_val+"&board="+board,
            type: "POST",
            contentType: "application/json",
            data: "",
            success: function (response) {
                console.log('inside fetch Subject success');
                var subjectHTMLRecord = "";
                if(response){
                responseArr = response.toString().split(',');
                //alert(responseArr.length);
                subArray = [];
                for (var i = 0; i < responseArr.length; i++) {
                    var subjectID = responseArr[i].toString().split(':')[0];
                    var subjectName = responseArr[i].toString().split(':')[1];
                    console.log('inside for loop');
                    console.log(subjectID);
                    console.log(subjectName);
                    var parameters = "\"" + subjectName + "\"" + ',' + subjectID + ',' + class_val +
                        ',' + board;
                    subjectHTMLRecord = subjectHTMLRecord +
                        '<a href="#"><li class="subjectItem" style="padding: 10px 5px;" id="'+subjectName+'" onClick=loadBooks(' +
                        parameters + '); name=' +
                        responseArr[i].toString().split(':')[0] + '><span>' + responseArr[i].toString()
                        .split(':')[1] +
                        '</li></a><div class="delIcon" onclick=deleteFunc('+subjectID+'); style="margin-top:-30px;color: forestgreen;"><i class="fas fa-minus-circle" id="deleteIcon"></i></div>';
                    // alert(responseArr[i].toString().split(':')[0]);
                    subArray.push(subjectName);
                }
                // $("#subjectDiv").hide();
                }else{
                    subjectHTMLRecord = subjectHTMLRecord + "<li>Not Available</li>"
                }
                $("#subjectDiv").html(subjectHTMLRecord);
                // $('#updatedSubjectDiv').show();
                $('#divSubject').show();
                $('.subCol').show();
                $('#subjectloader').hide();
                $('#other').show();
                                             
            },
            error: function (xhr) {
                window.alert("error occurred while display Subject Subject");
            }
        });
  }


    //$('#selected_sub_id').val($(this).attr("name"));

    

    function remBookList(){
        
        console.log('inside remBookList');
        // $('#inputBookBtn').show();
        fetchRemBooks(subjectforBooks,classforBooks);
        
    }

    function fetchRemSubjects(class_val){
        $.ajax({
            url: "/fetchRemSubjects?class_val="+class_val,
            type: "POST",
            contentType: "application/json",
            data: "",
            success: function (response) {
                var remSubjectHTMLRecords = "";
                console.log('inside fetchRemSubjects :'+response);
                if(response!=''){
                    responseArr = response.toString().split(',');
                // alert(responseArr);
                
                for (var i = 0; i < responseArr.length; i++) {
                    //alert(responseArr[i]);
                    var subjectID = responseArr[i].toString().split(':')[0];
                    var subjectName = responseArr[i].toString().split(':')[1];
                    
                    remSubjectHTMLRecords = remSubjectHTMLRecords +
                    '<a href="javascript:void(0);"><li class="subjectRemItem" id="'+subjectID+'id" onclick=onColor("'+subjectID+'"); style="padding: 10px 5px;">' + subjectName +
                        '</li></a>';
                }
                }else{
                    console.log('inside else');
                    remSubjectHTMLRecords = remSubjectHTMLRecords +
                    '<li>No suggestions available</li>'
                }
                console.log('Before adding Rem Subjects');
                $("#remSub").html(remSubjectHTMLRecords);
                $('.addSubBtn').show();
                $('.remSubject').show();
                $('.sugText').show();
                $('#remSub').show();
                $('#suggestionBtn').show();
                $('#inputBtn').hide();
                $('#subjectloader').hide();
                },
            error: function (xhr) {
                window.alert("error occurred while display suggestion subjects");
            }
        });
    }

    function fetchRemChapters(class_val,subject,bookId){
        $.ajax({
            url: "/fetchRemChapters?class_val="+class_val+"&subject="+subject+"&bookId="+bookId,
            type: "POST",
            contentType: "application/json",
            data: "",
            success: function (response) {
                var remChapterHTMLRecords = "";
                console.log('inside fetchRemChapters :'+response);
                if(response!=''){
                    responseArr = response.toString().split(',');
                // alert(responseArr);
                
                for (var i = 0; i < responseArr.length; i++) {
                    //alert(responseArr[i]);
                    var chapterID = responseArr[i].toString().split(':')[0];
                    var chapterName = responseArr[i].toString().split(':')[1];
                    console.log('inside chapter syllabus:'+chapterID);       
                    remChapterHTMLRecords = remChapterHTMLRecords +
                    '<a href="javascript:void(0);"><li class="chapterRemItem" onclick=onColor("'+chapterID+'");chapterTopic("'+class_val+'","'+subject+'","'+chapterID+'"); id="'+chapterID+'ids" onclick=onColor("'+chapterID+'");>' + chapterName +
                        '</li></a>';
                }
                }else{
                    console.log('inside else');
                    remChapterHTMLRecords = remChapterHTMLRecords +
                    '<li>No suggestions available</li>'
                }
                $('#remchaptloader').hide();
                $("#remchapt").html(remChapterHTMLRecords);
                $('#remchapt').show();
                // $('.chapterCol').hide();
                // $('.addChapterBtn').show();
                // $('.remChapters').show();
                // $('#remchapt').show();
                // $('#chapterText').hide();
                
                },
            error: function (xhr) {
                window.alert("error occurred while display Subject Subject");
            }
        });
    }
    
    function chapterTopic(class_val,subject,chapter_num){
        console.log('inside chapterTopic');
        var s = '#'+chapter_num+'ids';
        $('#chooseTopic').hide();
        $('.chapterTopic').hide();
        $('#chooseTopicloader').show();
        {% for chapter  in chapterNum %}
            var chapterNumber = '#{{chapter.chapter_num}}ids';

            $(chapterNumber).css('background-color','');
            $(chapterNumber).css('color','');

        {% endfor %}
        $(s).css('background-color','lightseagreen');
        $(s).css('color','white');
        console.log(class_val+' '+subject+' '+chapter_num);
        $.ajax({
            url: "/chapterTopic?class_val="+class_val+"&subject="+subject+"&chapter_num="+chapter_num,
            type: "POST",
            contentType: "application/json",
            data: "",
            success: function(response){
                // #chooseTopic
                var chapterTopicHTMLRecords = "";
                console.log('inside chapterTopic :'+response);
                if(response!=''){
                    responseArr = response.toString().split(',');
                // alert(responseArr);
                
                for (var i = 0; i < responseArr.length; i++) {
                    //alert(responseArr[i]);
                    var topicID = responseArr[i].toString().split(':')[0];
                    var topicName = responseArr[i].toString().split(':')[1];
                    console.log('inside chapterTopic:'+topicID);
                    
                    chapterTopicHTMLRecords = chapterTopicHTMLRecords +
                    '<a href="javascript:void(0);"><li class="chapterTopicItem" onclick=onColor("'+topicID+'");; id="'+topicID+'id">'+ topicName +
                        '</li></a>';
                }
                }else{
                    console.log('inside else');
                    chapterTopicHTMLRecords = chapterTopicHTMLRecords +
                    '<li>No Topics available</li>'
                }
                $("#chooseTopic").html(chapterTopicHTMLRecords);
                $('#chooseTopicloader').hide();
                $('.chapterTopic').show();
                $('#chooseTopic').show();
                
            },
            error: function(xhr){
                window.alert('error occurred while loading topics');
            }
        });
    }

    function fetchRemBooks(subjectforBooks,classforBooks){
        $.ajax({
            url: "/fetchRemBooks?class_val="+classforBooks+"&subject="+subjectforBooks,
            type: "POST",
            contentType: "application/json",
            data: "",
            success: function (response) {
                var remBookHTMLRecords = "";
                console.log('inside fetchRemBook :'+response);
                if(response){
                    responseArr = response.toString().split(',');
                // alert(responseArr);
                
                for (var i = 0; i < responseArr.length; i++) {
                    //alert(responseArr[i]);
                    var bookID = responseArr[i].toString().split(':')[0];
                    var bookName = responseArr[i].toString().split(':')[1];
                    console.log('inside book syllabus:'+bookID);
                    
                    remBookHTMLRecords = remBookHTMLRecords +
                    '<a href="javascript:void(0);"><li class="bookRemItem" id="'+bookID+'id" onclick=onColor("'+bookID+'"); style="padding: 10px 5px;">' + bookName +
                        '</li></a>';
                }
                }else{
                    remBookHTMLRecords = remBookHTMLRecords +
                    '<li style="padding: 10px 5px;">No suggestions available</li>'
                }
                $("#rembok").html(remBookHTMLRecords);
                $('.bookCol').hide();
                $('.addBookBtn').show();
                $('.remBooks').show();
                $('#rembok').show();
                $('#bookText').hide();
                $('#otherBook').show();
                },
            error: function (xhr) {
                window.alert("error occurred while display Books");
            }
        });
    }

    function remChapterList(){
        $('#remchapt').hide();
        $('#remchaptloader').show();
        console.log('inside remChapterList');
        $('.remchapters').show();
        $('.addChapterBtn').show();
        fetchRemChapters(classforChapters,subjectforChapters,bookIdforChapters);
    }

    function remSubList(){
        $('.subCol').hide();
        $('#subjectloader').show();
        console.log('inside remSubList');
        fetchRemSubjects(classforSubject);
    }

    function onColor(subject){
        var ids = '#'+subject+'id';
        $(ids).css('background-color','lightseagreen');
        $(ids).css('color','white');
    }
    
    var responseArr = [];
    var selectedBoardID = "";
    var selectedClassVal = "";
    var selectedSubjectVal = "";
    var selectedSubjectID = "";
    var  selectedChapterNum = "";
    var  selectedChapterName = "";
    var boardforSub = '';

    $('.boardClass').click(function () {
        var classHTMLRecords = "";
        selectedBoardID = this.id;
        boardforSub = selectedBoardID;
        $('.boardClass').css('background-color','lightseagreen');
        $('.boardClass').css('color','white');
        $('#classDiv').hide();
        $('#classloader').show();
        $.ajax({
            url: "/syllabusClasses?board_id=" + selectedBoardID,
            type: "get",
            data: '',
            success: function (response) {
                responseArr = response.toString().split(',');
                //alert(responseArr.length);
                for (var i = 0; i < responseArr.length; i++) {
                    //alert(responseArr[i]);
                    
                    classHTMLRecords = classHTMLRecords +
                        '<a href="javascript:void(0);"><li class="collection-item classVal" id="'+responseArr[i]+'" onClick="loadSubjects(' +
                        responseArr[i] + ')" name=' +
                        selectedBoardID + ' id=' + responseArr[i] + ' >' + responseArr[i] +
                        '</li></a>';
                }
                
                $("#classDiv").html(classHTMLRecords);
                
                $('#classDiv').show();
                $('#classloader').hide();
                
            },
            error: function (xhr) {
                window.alert("error occurred while fetching class list");
            }
        });
    });

    //$('.classVal').click(function () {
    var subArray = [];
    var bookArray = [];
    var classforSubject = '';
    function loadSubjects(selectedClassVal) {
        $('#divSubject').hide();
        $('#subjectloader').show();
        classforSubject = selectedClassVal;
        {% for class in classValues %}
            var desc = "{{class.description}}";
            var clasId = '#'+desc.toString();
            $(clasId).css('background-color','');
            $(clasId).css('color','');
            console.log('inside for'+clasId);
        {% endfor %}
        
        var classId = '#'+selectedClassVal.toString();
        console.log('outside for:'+selectedClassVal);
        $(classId).css('background-color','lightseagreen');
        $(classId).css('color','white');
        console.log('inside loadSubjects'+selectedClassVal);
        $.ajax({
            url: "/syllabusSubjects?board_id=" + selectedBoardID + "&class_val=" + selectedClassVal,
            type: "get",
            data: '',
            success: function (response) {
                
                //alert(responseArr.length);
                var subjectHTMLRecords = "";
                console.log('inside load Subjects');
                console.log(response);
                if(response){
                responseArr = response.toString().split(',');
                for (var i = 0; i < responseArr.length; i++) {
                    var subjectID = responseArr[i].toString().split(':')[0];
                    var subjectName = responseArr[i].toString().split(':')[1];
                    console.log('inside for loop');
                    console.log(subjectID);
                    console.log(subjectName);
                    var parameters = "\"" + subjectName + "\"" + ',' + subjectID + ',' + selectedClassVal +
                        ',' + selectedBoardID;
                    subjectHTMLRecords = subjectHTMLRecords +
                        '<a href="javascript:void(0);"><li class="subjectItem" style="padding: 10px 5px;" id="'+subjectName+'" onClick=loadBooks(' +
                        parameters + '); name=' +
                        responseArr[i].toString().split(':')[0] + '><span>' + responseArr[i].toString()
                        .split(':')[1] + '</span>' +
                        '</li></a><div class="delIcon" onclick=deleteFunc('+subjectID+'); style="margin-top:-30px;color: forestgreen;"><i class="fas fa-minus-circle" id="deleteIcon"></i></div>';
                    // alert(responseArr[i].toString().split(':')[0]);
                    subArray.push(subjectName+':'+subjectID);
                     
                }
                }else{
                    // subjectHTMLRecord = '';
                    subjectHTMLRecords = subjectHTMLRecords + '<li class="subjectItem">Not Available</li>'
                }
                
                $("#subjectDiv").html(subjectHTMLRecords);
                // $('#updatedSubjectDiv').hide();
                $('#divSubject').show();
                $('#subjectloader').hide();
            },
            error: function (xhr) {
                window.alert("error occurred while fetching subject list");
            }
        });
        
        //});  
    }

    

    //$('.subjectItem').click(function () {
        var classforBooks = '';
        var subjectforBooks = '';
        var subjectIdforBooks = '';
        var boardforBooks = '';
    function loadBooks(selectedSubjectVal, selectedSubjectID, selectedClassVal, selectedBoardID) {
        //$('#selected_sub_id').val($(this).attr("name"));
        // alert("We're in load books function " + selectedSubjectVal + selectedClassVal + selectedBoardID);
        $('#divBook').hide();
        $('.bookCol').hide();
        $('#Bookloader').show(); 
        classforBooks = selectedClassVal;
        subjectforBooks = selectedSubjectVal;
        subjectIdforBooks = selectedSubjectID;
        boardforBooks = selectedBoardID;
        {% for sub in subjectValues %}
            var subVal = "{{sub.description}}";
            var subjectVal = '#'+subVal.toString();
            $(subjectVal).css('background-color','');
            $(subjectVal).css('color','');
            console.log('inside for:'+subjectVal);
        {% endfor %}
        var subjectVal = '#'+selectedSubjectVal.toString();
        console.log('outside for:'+selectedSubjectVal);
        $(subjectVal).css('background-color','lightseagreen');
        $(subjectVal).css('color','white');
        $.ajax({
            url: "/syllabusBooks?board_id=" + selectedBoardID + "&class_val=" + selectedClassVal +
                "&subject_name=" + selectedSubjectVal,
            type: "get",
            data: '',
            success: function (response) {

                var bookHTMLRecords = "";
                if(response){
                responseArr = response.toString().split(',');
                // alert(responseArr);
                var bookHTMLRecords = "";
                for (var i = 0; i < responseArr.length; i++) {
                    //alert(responseArr[i]);
                    var bookID = responseArr[i].toString().split(':')[0];
                    var bookName = responseArr[i].toString().split(':')[1];
                    console.log('inside book syllabus:'+bookID);
                    var parameters = "\"" + selectedSubjectVal +
                        "\"," + bookID+',' + selectedSubjectID + ',' + selectedClassVal + ',' + selectedBoardID;
                        console.log('Books Records in parameters:'+parameters);
                    bookHTMLRecords = bookHTMLRecords +
                        '<a href="javascript:void(0);"><li class="bookItem" style="padding: 10px 5px;" id="'+bookID+'book" onClick=loadChapters(' +
                        parameters + '); name=' +
                        selectedBoardID + '>' + bookName +
                        '</li></a><div class="delIconBooks" onclick=deleteBookFunc('+bookID+'); style="margin-top:-30px;color:forestgreen;"><i class="fas fa-minus-circle" id="deleteIcon"></i></div>';
                    bookArray.push(bookID+':'+bookName);
                }
                }else{
                    bookHTMLRecords = bookHTMLRecords +
                    '<li style="padding: 10px 5px;">No data available</li>'
                }
                $("#bookDiv").html(bookHTMLRecords);
                $('#divBook').show();
                $('.bookCol').show();
                $('.addBookBtn').hide();
                $('#Bookloader').hide();
            },
            error: function (xhr) {
                window.alert("error occurred while fetching book list");
            }
        });
        
        //});
    }
    var classforChapters = '';
    var subjectforChapters = '';
    var bookIdforChapters = '';
    var subjectIdforChapters = '';
    var boardIdforChapters = '';
    function loadChapters( selectedSubjectVal, selectedBookId,selectedSubjectID, selectedClassVal, selectedBoardID) {
        // alert(selectedSubjectID + "this is the subject id");
        // alert(selectedSubjectVal + "this is the subject val");
        
        $('#divChapter').hide();
        $('.chapterCol').hide();
        $('#chapterloader').show();
        classforChapters = selectedClassVal;
        subjectforChapters = selectedSubjectVal;
        bookIdforChapters =  selectedBookId;
        subjectIdforChapters = selectedSubjectID;
        boardIdforChapters = selectedBoardID;
        {% for book in bookName %}
            var bookNam = '#{{book.book_id}}book';
            $(bookNam).css('background-color','');
            $(bookNam).css('color','');
            console.log('inside for:'+bookNam);
        {% endfor %}
        var bookId = '#'+selectedBookId+'book';
        console.log('outside for:'+selectedBookId);
        $(bookId).css('background-color','lightseagreen');
        $(bookId).css('color','white');
        $.ajax({
            url: "/syllabusChapters?board_id=" + selectedBoardID + "&class_val=" + selectedClassVal +
                "&subject_id=" + selectedSubjectID + "&book_id=" + selectedBookId + "&subject_val=" +
                selectedSubjectVal,
            type: "get",
            data: '',
            success: function (response) {
                var chapterHTMLRecords = "";
                if(response){
                responseArr = response.toString().split(',');
                // alert(responseArr.length);
                
                bookIdforChapters = selectedBookId;
                console.log('inside syllabus chapter');
                console.log(response);
                for (var i = 0; i < responseArr.length; i++) {
                    // alert(responseArr[i]);
                    var chapterNum = responseArr[i].toString().split(':')[0];
                    var chapterName = responseArr[i].toString().split(':')[1];
                    // var chapter = responseArr[i].toString().split(':')[1];
                    // alert(chapterNum + " and " + chapterName);
                    var parameters ="\""+chapterName + "\"" + "," + "\"" + selectedSubjectVal +"\"," + selectedSubjectID + "," + selectedClassVal + "," + selectedBoardID+","+chapterNum+","+selectedBookId;
                    chapterHTMLRecords = chapterHTMLRecords +
                    '<a href="javascript:void(0);"><li class="chapterColor chapterItem'+chapterNum+'" style="padding: 10px 5px;" id="'+chapterName+'" onClick=loadTopics("' + selectedSubjectVal +'",'+ selectedSubjectID + ',' + selectedClassVal + ',' + selectedBoardID+','+chapterNum+','+selectedBookId+'); >' + chapterName +
                            '</li><div class="delIconChapter" onclick=deleteChapterFunc('+chapterNum+'); style="margin-top:-30px;color:forestgreen;"><input type="hidden" value="'+chapterName+'" id="inputChapterName"><i class="fas fa-minus-circle" id="deleteIcon"></i></div></a>';
                }
                }else{
                    chapterHTMLRecords = chapterHTMLRecords + '<li style="padding: 10px 5px;">No data available</li>'
                }

                $("#chapterDiv").html(chapterHTMLRecords);
                $('#divChapter').show();
                $('.chapterCol').show();
                $('.addChapterBtn').hide();
                $('#chapterloader').hide();
            },
            error: function (xhr) {
                window.alert("error occurred while fetching book list");
            }
        });
        
    }


    var subjectIdforTopics = '';
    var classforTopics = '';
    var chapterNumforTopics = '';
    var bookIdforTopics = '';
    var subjectIdforTopics = '';
    var boardforTopics = '';
    function loadTopics( selectedSubjectVal,  selectedSubjectID, selectedClassVal, selectedBoardID, selectedChapterNum,selectedBookId) {
        var s = '.chapterItem'+selectedChapterNum;
        // var chapterId = '#'+selectedChapterNum.toString();
        // console.log(chapterId);
        console.log('inside loadTopics:'+selectedBookId);
        subjectIdforTopics = selectedSubjectID;
        subjectforTopics = selectedSubjectVal;
        classforTopics = selectedClassVal;
        chapterNumforTopics = selectedChapterNum;
        bookIdforTopics = selectedBookId;
        boardforTopics = selectedBoardID;
        $('#topicDiv').hide();
        $('.topicCol').hide();
        $('#topicloader').show();
        var chapterName = $('#inputChapterName').val();
        console.log('Chapter Name:'+chapterName);
        {% for chapter  in chapterNum %}
            var chapterNumber = '.chapterItem{{chapter.chapter_num}}';
            $(chapterNumber).css('background-color','');
            $(chapterNumber).css('color','');

        {% endfor %}
        $(s).css('background-color','lightseagreen');
        $(s).css('color','white');
        // console.log(chapterName);
        // console.log('Chapter Name:'+chapterName);
        console.log('Inside load Topics');
        console.log('Data:'+selectedSubjectVal+','+selectedSubjectID+','+selectedClassVal+','+selectedBoardID+','+selectedChapterNum);
        $.ajax({
            url: "/syllabusTopics?board_id=" + selectedBoardID + "&class_val=" + selectedClassVal +
                "&subject_id=" + selectedSubjectID + "&chapter_num=" + selectedChapterNum+"&chapterName="+chapterName+"&selectedBookId="+selectedBookId,
            type: "get",
            data: '',
            success: function (response) {
                responseArr = response.toString().split(',');
                //alert(responseArr.length);
                var topicHTMLRecords = "";
                for (var i = 0; i < responseArr.length; i++) {
                    var topicID = responseArr[i].toString().split(':')[0];
                    var topicName = responseArr[i].toString().split(':')[1];
                    //alert(responseArr[i]);
                    topicHTMLRecords = topicHTMLRecords +
                        '<a href="#modal2" class="modal-trigger"><li class="topicItem" style="padding: 10px 5px;" name = "' +
                            topicID + '" id="' + topicID + 'topic" onClick=loadQuestions("' + topicID +'",'+selectedClassVal+','+selectedSubjectID+','+selectedBoardID+','+selectedChapterNum+'); >' + topicName +
                        '</li></a><div class="delIconTopics" onclick=deleteTopicFunc('+topicID+'); style="margin-top:-30px;color:forestgreen;"><i class="fas fa-minus-circle" id="deleteIcon"></i></div>';
                }
                $("#topicDiv").html(topicHTMLRecords);
                
                
                $('#topicDiv').show();
                $('.topicCol').show();
                $('#topicloader').hide();
            },
            error: function (xhr) {
                window.alert("error occurred while fetching book list");
            }
        });
        
    };

    function loadQuestions(selectedTopicId,selectedClassVal,selectedSubjectID){
        var topicsId = '#'+selectedTopicId.toString()+'topic';
        console.log('inside loadQuestions');
        {% for topic in topicId %}
            var topicIds = '#{{topic.topic_id}}topic';
            $(topicIds).css('background-color','');
            $(topicIds).css('color','');
            if(topicIds==topicsId){
                console.log('topic in for:'+topicIds);
                console.log('topic outside for:'+topicsId);
            }
        {% endfor %}
        console.log('outside for:'+topicsId);
        $(topicsId).css('background-color','lightseagreen');
        $(topicsId).css('color','white');
        $.ajax({
            url: "/syllabusQuestions?class_val=" + selectedClassVal +
                "&subject_id=" + selectedSubjectID + "&topic_id=" + selectedTopicId,
            type: "get",
            data: '',
            success: function(response){
                var htmlQuestion = '';
                responseArr = response.toString().split(',');
                for(var i=0;i<responseArr.length;i++){
                    
                    console.log(responseArr[i]);
                    htmlQuestion = htmlQuestion + "<li class='questionRow'> "+ (i+1) +". "+responseArr[i]+"</li>"
                }
                $('#questions').html(htmlQuestion);
            },
            error:function(xhr){

            }
        });
    }

</script>

{% endblock %}