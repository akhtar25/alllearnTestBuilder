{% extends "layout.html" %} {% block content %}

<div class="container ">
    <!--This section is fo subscription plans-->

    <!-- <div class="row">
        <div class="section">
            <h2 class="grey-text textCenter">Syllabus</h2>
        </div>
    </div> -->
    <div class="row" id="titleSyllabus">
            <h2 class="grey-text">Syllabus</h2>
        <div class="col lg s12" id="unselect">
            <ul class="tabs">
                <li class="tab col s6">
                    <a href="javascript:void(0);" id="general" class="tabFont">General</a>
                </li>
                <li class="tab col s6">
                    <a href="" id="specificSchool" class="tabFont">{{school_name}}</a>
                </li>
            </ul>
        </div>
    </div>
    <div class="row">
        <div class="section1">
            <section class="plans-container" id="plans">
                <!-- <h2 class="textCenter">General</h2> -->
                <article class="col s12 m6 l2 ">
                    <div class="card  z-depth-4">
                        <div class="card-image">
                        </div>
                        <div class="card-content ">
                            <div class="card-title">Boards</div>

                            <ul class="collection " id="boardDiv">
                            {% for board in generalBoard %}
                                    <li class="collection-item generalBoardClass" id="{{board.msg_id}}">
                                        {{board.description}}
                                    </li>
                            {% endfor %}
                            </ul>
                        </div>
                    </div>
                </article>
                <article class="col s12 m6 l2 ">
                    <div class="card  z-depth-4">
                        <div class="card-image">
                        </div>
                        <div class="card-content ">
                            <div class="card-title">Classes</div>
                            <ul class="collection " id="generalClassDiv" style="max-height:380px;position:relative;overflow-y:auto">

                            </ul>
                            <div id="generalClassLoader" style="display: none;">
                                    <img src="../static/images/smallLoader.gif" style="width:100%">
                            </div>
                        </div>

                    </div>
                </article>
                <article class="col s12 m6 l2 ">
                    <div class="card  z-depth-4">
                        <div class="card-image">
                        </div>
                        <div class="card-content ">
                            <div class="card-title">Subjects</div>


                            <ul class="collection " id="generalSubjectDiv" style="max-height:380px;position:relative;overflow-y:auto">

                            </ul>
                            <div id="generalSubjectLoader" style="display: none;">
                                    <img src="../static/images/smallLoader.gif" style="width:100%">
                            </div>
                        </div>

                    </div>
                </article>
                <article class="col s12 m6 l2 ">
                    <div class="card  z-depth-4">
                        <div class="card-image">
                        </div>
                        <div class="card-content ">
                            <div class="card-title">Books</div>


                            <ul class="collection " id="generalDivBooks" style="max-height:380px;position:relative;overflow-y:auto">
                            </ul>
                            <div id="generalBookLoader" style="display: none;">
                                <img src="../static/images/smallLoader.gif" style="width:100%">
                            </div>                        
                            </div>
                    </div>
                </article>
                <article class="col s12 m6 l2 ">
                    <div class="card  z-depth-4">
                        <div class="card-image">
                        </div>
                        <div class="card-content ">
                            <div class="card-title">Chapters</div>


                            <ul class="collection " id="generalDivChapters" style="max-height:380px;position:relative;overflow-y:auto">

                            </ul>
                            <div id="generalChapterLoader" style="display: none;">
                                <img src="../static/images/smallLoader.gif" style="width:100%">
                            </div>                        
                            </div>

                    </div>
                </article>
                <article class="col s12 m6 l2 ">
                    <div class="card  z-depth-4">
                        <div class="card-image">
                        </div>
                        <div class="card-content ">
                            <div class="card-title">Topics</div>
                            <ul class="collection " id="generalDivTopics" style="max-height:380px;position:relative;overflow-y:auto">
                            </ul>
                            <div id="generalTopicLoader" style="display: none;">
                                <img src="../static/images/smallLoader.gif" style="width:100%">
                            </div>                       
                             </div>
                    </div>
                </article>
            </section>
        </div>

        <!-- for Specific School Tab -->

        <div class="section2">
                <!-- <h2 class="textCenter">{{school_name}}</h2> -->
                <section class="plans-container" id="plans">
                        
                    <article class="col-md-2 col-xl-2">
                            
                        <div class="card  z-depth-4">
                            <div class="card-image">
                                
                            </div>
                            <div class="card-content ">
                                <div class="card-title">Boards</div>
    
                                <ul class="collection " id="boardDiv">
                                        <li class="collection-item boardClass" id="{{boardRowsId}}">
                                            {{boardRows}}
                                        </li>
                                </ul>
                            </div>
                        </div>
                    </article>
                    <article class="col s12 m6 l2 ">
                        <div class="card  z-depth-4">
                            <div class="card-image">
                            </div>
                            <div class="card-content ">
                                <div class="card-title">Classes</div>
                                <ul class="collection " id="classDiv" style="display:none;">
    
                                </ul>
                                <div class="classCol" style="display:none;" onclick="showClassText();">
                                <i class="fas fa-plus-circle"></i>
                                </div><br>
                                <div class="classTextBoxes">
                                <div class="srollBox">
                                <input type="number" class="class" placeholder="Class" style="text-align:center;width:130px;" onKeyPress="return false;" max="12" min="1">
                                <div class="textWithBtn"><input type="text" class="section" placeholder="Section" style="text-align:center;width:130px;" maxlength="1"><div id="addTextBtn1" onclick="addTextBtn();">
                                <i class="fas fa-plus-circle"></i>
                                </div></div>
                                <div id="newTextBoxes"></div></br>
                                </div>
                                <div class="classBtn">
                                <button style="border-radius:15px;" class="btn waves-light green lighten-1 white-text" type="button" id="addClassBtn" onclick="addClassBtn();"><a href="javascript:void(0);" style="color: white;">Add</a></button>
                                </div>
                                </div>
                                <div id="msgClass"></div>
                                <div id="classloader" style="display: none;">
                                    <img src="../static/images/smallLoader.gif" style="width:100%">
                                </div>
                            </div>
    
                        </div>
                    </article>
                    <article class="col s12 m6 l2 ">
                        <div class="card  z-depth-4">
                            <div class="card-image">
                            </div>
                            <div class="card-content ">
                                <div class="card-title">Subjects</div>
    
                                <div id='divSubject' style="display: none;">
                                <ul class="collection " id="subjectDiv" style="max-height:380px;position:relative;overflow-y:auto">
    
                                </ul>
                                <input type="text" placeholder="Search" onkeyup="myFunction()" id="searchId" style="display:none;">
                                <div class="remSubject" style="display:none;">
                                <span class="sugText">Suggestion</span>
                                <ul class="collection" id="remSub">
                                
                                </ul>
                                <h5 id="searchMsg" style="display:none;">No matching data</h5>
                                <!-- <a href="javascript:void(0);" id="other">Add New Subject</a> -->
                                <!-- <input type="text" placeholder="Enter Subject Name" style="display:none;" id="subText"> -->
                                </div>
                                <div class="subCol" onclick="remSubList();">
                                <i class="fas fa-plus-circle"></i>
                                </div>
                                <div class="addSubBtn" style="display:none;text-align:center;margin-top:10px">
                                <button style="border-radius:15px;" class="btn waves-light green lighten-1 white-text" type="button" id="suggestionBtn" onclick="addBtn();"><a href="javascript:void(0);" style="color: white;">Add</a></button>
                                <button style="border-radius:15px;display:none;" class="btn waves-light green lighten-1 white-text" type="button" id="inputBtn" onclick="addInputBtn();"><a href="javascript:void(0);" style="color: white;">Add</a></button>
                                </div>
                                </div>
                                </div>
                                <div id="msgSubject"></div>
                                <div id="subjectloader" style="display: none;">
                                    <img src="../static/images/smallLoader.gif" style="width:100%">
                                </div>
                                
                            </div>
    
                    </article>
                    <article class="col s12 m6 l2 ">
                        <div class="card  z-depth-4">
                                <div class="card-image">
                                </div>
                                <div class="card-content ">
                                    <div class="card-title">Books</div>
    
                                <div id='divBook' style="display: none;">
                                <ul class="collection " id="bookDiv" style="max-height:380px;position:relative;overflow-y:auto">
    
                                </ul>
                                <div class="remBooks" style="display:none;">
                                <span class="sugTextBooks">Suggestion</span>
                                <ul class="collection" id="rembok">
                                
                                </ul>
                                <a href="javascript:void(0);" id="otherBook">Add other books</a>
                                <input type="text" placeholder="Enter Book Name" onkeyup = "spellCheck();" style="display:none;color:black;" id="bookText">
                                <h5 id="suggBox">suggest:<a style="margin-left:5px;" id="correctWord" onclick="insertWord();"></a></h5>
                                </div>
                                <div class="bookCol" onclick="remBookList();">
                                <i class="fas fa-plus-circle"></i>
                                </div>
                                <div class="addBookBtn" style="text-align:center;margin-top:5px;">
                                <button style="border-radius:15px;" class="btn waves-light green lighten-1 white-text" type="button" id="suggestionBookBtn" onclick="addBookBtn();"><a href="javascript:void(0);" style="color: white;">Add</a></button>
                                <button style="border-radius:15px;display:none;" class="btn waves-light green lighten-1 white-text" type="button" id="inputBookBtn" onclick="addInputBookBtn();"><a href="javascript:void(0);" style="color: white;">Add</a></button>
                                </div>
                                </div>
                                </div>
                                <div id="msgBook"></div>
                                <div id="Bookloader" style="display: none;">
                                    <img src="../static/images/smallLoader.gif" style="width:100%">
                                </div>   
                                </div>
                    </article>
                    <article class="col s12 m6 l2 ">
                        <div class="card  z-depth-4">
                                <div class="card-image">
                                </div>
                                <div class="card-content ">
                                    <div class="card-title">Chapters</div>
    
                                <div id='divChapter' style="display: none;">
                                <ul class="collection " id="chapterDiv" style="margin-left:-5px;max-height:380px;position:relative;overflow-y:auto">
    
                                </ul>
                                <a class="chapterCol modal-trigger" href="#modal1" onclick="onclickChapterAdd();remChapterList();">
                                <i class="fas fa-plus-circle"></i>
                                </a>
                                <!-- Model -->
                                    <div id="modal1" class="modal" style="height:67%;width:42%;">
                                        <div class="modal-content" style="padding-bottom:15px;">
                                          <div class="remchapters" style="display:none;">
                                            <span class="sugTextChapters">Choose existing chapters</span></br>
                                            <input type="text" placeholder="Search" onkeyup="myFunctionChapters()" id="searchIdForChapters">
                                            <ul class="collection" id="remchapt" style="display:none;">
                                            
                                            </ul>
                                            <h5 id="searchMsgChapters" style="display:none;">No matching data</h5>
                                            <div id="remchaptloader" style="display:none;">
                                                <img src="../static/images/smallLoader.gif" style="width:25%;">
                                            </div>
                                            <a href="javascript:void(0);" id="otherChapter">Add new chapter</a></br>
                                            <a href="javascript:void(0);" id="otherTopic" style="display:none;">Add new topic</a><br>
                                            <div class="newChapterDiv" style="display:none;margin-top: -55px;">
                                            <span class="chapterTextlabel">Chapter</span></t><input type="text" style="width: 300px;margin-left:20px;margin-right:20px;color:black;font-size:14px;" id="chapterFocus" onkeyup = "spellCheckChapter();" class="chapterText"><span class="chapNoTextlabel">Ch no.</span><input type="text" style="width:40px;margin-left:10px;color:black;font-size:14px;" class="chapNoText"></br>
                                            <h5 id="suggBoxChapter">suggest:<a style="margin-left:5px;" id="correctWordChapter" onclick="insertWordChapter();"></a></h5>
                                            <span class="topicTextlabel">Topic</span></t>
                                            <div class="allTextBoxes">
                                            <input type="text" style="width:400px;margin-left:68px;color:black;font-size:14px;" class="topicText" onkeyup = "spellCheckTopic();"><a id="addRowBtn1" class="iconAdd" onclick="appendRow();"><i class="fas fa-plus-circle"></i></a></br>
                                            <div id="newTextbox"></div>
                                            </div>
                                            <h5 id="suggBoxTopic">suggest:<a style="margin-left:5px;" id="correctWordTopic" onclick="insertWordTopic();"></a></h5>
                                            </div>
                                            <span class="chapterTopic" style="display:none;">Choose topics</span></br>
                                            <input type="text" placeholder="Search" onkeyup="myFunctionTopics()" id="searchIdForTopics">
                                            <ul class="collection" id="chooseTopic" style="display:none;">
                                
                                            </ul>
                                            <h5 id="searchMsgTopics" style="display:none;">No matching data</h5>
                                            <div id="msg" style="display:none;float:left;"></div>
                                            <div id="chooseTopicloader" style="display:none;">
                                                <img src="../static/images/smallLoader.gif" style="width:25%">
                                            </div>
                                            
                                          </div>
                                        </div>
                                        <div class="modal-footer" style="padding-top:1px;">
                                            
                                          <div class="addChapterBtn" style="text-align:center;">
                                            
                                            <button style="border-radius:15px;width:100px;" class="btn waves-light green lighten-1 white-text" type="button" id="suggestionChapterBtn" onclick="addChapterBtn();"><a href="javascript:void(0);" style="color: white;">Add</a></button>
                                            <button style="border-radius:15px;display:none;width:100px;" class="btn waves-light green lighten-1 white-text" type="button" id="inputChapterBtn" onclick="addInputChapterBtn();"><a href="javascript:void(0);" style="color: white;">Add</a></button>
                                            <button style="border-radius:15px;width:100px;display:none;" class="btn waves-light green lighten-1 white-text" type="button" id="addTopicBtn" onclick="addTopicBtn();"><a href="javascript:void(0);" style="color: white;">Add</a></button>
                                            <button style="border-radius:15px;display:none;width:100px;" class="btn waves-light green lighten-1 white-text" type="button" id="inputTopicBtn" onclick="addInputTopicBtn();"><a href="javascript:void(0);" style="color: white;">Add</a></button>
                                        </div>
                                        </div>
                                      </div>

                                <!-- End -->
                                
                                </div>
                                </div>
                                <div id="chapterloader" style="display: none;">
                                    <img src="../static/images/smallLoader.gif" style="width:100%">
                                </div>   
                                </div>
                    </article>
                    <article class="col s12 m6 l2 ">
                        <div class="card  z-depth-4">
                            <div class="card-image">
                            </div>
                            <div class="card-content ">
                                <div class="card-title">Topics</div>
                                <ul class="collection " id="topicDiv" style="display: none;max-height:380px;position:relative;overflow-y:auto">
                                </ul>
                                <a class="topicCol modal-trigger" href="#modal1" onclick="onclickTopicAdd();selectedChapter();" style="display: none;">
                                    <i class="fas fa-plus-circle"></i>
                                </a>
                                 
                                 <div id="topicloader" style="display: none;">
                                        <img src="../static/images/smallLoader.gif" style="width:100%">
                                </div>
                                </div>
                        </div>
                    </article>
                </section>
            </div>
    </div>
    <div id="modal2" class="modal" style="width:60%;height:60%;">
                                        <div class="modal-content">
                                        <span id="heading" style="font-size:16px;">Details</span>
                                            <!-- <ul class="collection" id="questions" style="height:285px;position:relative;overflow-y:auto;">
                                            
                                            </ul> -->
                                            <div class="contentDetail" style="height:285px;position:relative;overflow-y:auto;">
                                            <div class='dataDetails'>
                                              
                                                <h5 class="colBoard">Board: <span id='board'><span></h5>
                                                <h5 class="colClass">Class: <span id='class'><span></h5>
                                                <h5 class="colSubject">Subject: <span id='subject'><span></h5>
                                                <h5 class="colChapter">Chapter: <span id='chapter'><span></h5>
                                                <h5 class="colTopic">Topic: <span id='topic'><span></h5>
                                                
                                            </div>
                                            <div class="shortDetails">
                                                    <h4 class="subQuestionDet">Number of subjective questions:<span id='subQuestion'><span></h4>
                                                    <h4 class="objQuestionDet">Number of objective questions:<span id='objQuestion'><span></h4>
                                                    <h4 class="refContentDet">Number of reference content:<span id='refContent'><span></h4>
                                                    <h4 class="linkQuesDetail">For question details: <a href="{{url_for('questionBank')}}" target='_blank' style="margin-left:10px;">click here</a></h4>
                                                    <h4 class="linkContentMan">For reference content: <a href="{{url_for('contentManager')}}" target='_blank' style="margin-left:10px;">click here</a></h4>
                                                </div>
                                                <div id="questionDetailloader" style="display:none;">
                                                <img src="../static/images/smallLoader.gif" style="width:75%;margin-left: 70px;margin-top: -20px;">
                                            </div>
                                            </div>
                                            
                                        </div>
                                        <div class="modal-footer">
                                        </div>
                                      </div> 
</div>
<script>

    var z = 1;
    function addTextBtn(){
        var ids = '#addTextBtn'+z;
          $('#addTextBtn1').hide();
          $(ids).hide();
        var d = document.getElementById('newTextBoxes');
        console.log('inside addTextBtn');
        console.log(ids);
        z=z+1;
        d.innerHTML += '<div class="textWithBtn"><input type="text" class="section" placeholder="Section" style="text-align:center;width:130px;" maxlength="1"><div id="addTextBtn'+z+'" onclick="addTextBtn();"><i class="fas fa-plus-circle"></i></div></div>';
    }

    function insertWord(){
        $('#bookText').val(corWordBook);
        $('#suggBox').hide();
    }

    function insertWordChapter(){
        console.log('inside insertWordChapter');
        console.log(corWordChapter);
        $('.chapterText').val(corWordChapter);
        $('#suggBoxChapter').hide();
    }

    function insertWordTopic(){
        console.log('inside insertWordTopic');
        $('.topicText').val(corWordTopic);
        $('#suggBoxTopic').hide();
    }

    var corWordTopic = '';
    function spellCheckTopic(){
        console.log('inside spellCheckTopic');
        var topicText = $('.topicText').val();
        $.ajax({
            url: "/spellCheckBook?bookText="+topicText,
            type: "POST",
            contentType: "application/json",
            data: "",
            success: function (response) {
                console.log('inside success of spellCheckBook');
                console.log(response);
                if(response){
                $('#correctWordTopic').html(response);
                corWordTopic = response;
                $('#suggBoxTopic').show();
                }else{
                $('#correctWordTopic').html('');
                $('#suggBoxTopic').hide();
                }
                // result = response;
                // addInputNewChapter(result);
            },
            error: function (xhr) {
                window.alert("error occurred while adding Classes");
            }
            
        });
    }

    var corWordChapter = '';
    function spellCheckChapter(){
        console.log('inside spellCheckChapter');
        var chapterText = $('.chapterText').val();
        $.ajax({
            url: "/spellCheckBook?bookText="+chapterText,
            type: "POST",
            contentType: "application/json",
            data: "",
            success: function (response) {
                console.log('inside success of spellCheckBook');
                console.log(response);
                if(response){
                $('#correctWordChapter').html(response);
                corWordChapter = response;
                $('#suggBoxChapter').show();
                }else{
                $('#correctWordChapter').html('');
                $('#suggBoxChapter').hide();
                }
                // result = response;
                // addInputNewChapter(result);
            },
            error: function (xhr) {
                window.alert("error occurred while adding Classes");
            }
            
        });
    }

    var corWordBook = '';
    function spellCheck(){
        console.log('inside spellCheck');
        var bookText = $('#bookText').val();
        $.ajax({
            url: "/spellCheckBook?bookText="+bookText,
            type: "POST",
            contentType: "application/json",
            data: "",
            success: function (response) {
                console.log('inside success of spellCheckBook');
                console.log(response);
                if(response){
                $('#correctWord').html(response);
                corWordBook = response;
                $('#suggBox').show();
                }else{
                $('#correctWord').html('');
                $('#suggBox').hide();
                }
                // result = response;
                // addInputNewChapter(result);
            },
            error: function (xhr) {
                window.alert("error occurred while adding Classes");
            }
            
        });
    }

    function myFunctionTopics(){
        console.log('inside myfunctionTopics');
        var topic = $('#searchIdForTopics').val();
        var filter = topic.toUpperCase();
        var ul = document.getElementById('chooseTopic');
        var li = ul.getElementsByTagName("li");
        var msg = 0;
        $('#chooseTopic').show();
        $('#searchMsgTopics').hide();
        for(var i=0;i<li.length;i++){
            var topic = li[i].innerText;
            console.log('inside for');
            console.log(topic);
            if (topic.toUpperCase().indexOf(filter) > -1) {
                li[i].style.display = "";
                msg = 1;
            }
            else{
                li[i].style.display = "none";
            }

        }
        if(msg==0){
            $('#chooseTopic').hide();
            $('#searchMsgTopics').show();
        }
    }

    function myFunctionChapters(){
        console.log('inside myfunctionChapters');
        var chapter = $('#searchIdForChapters').val();
        var filter = chapter.toUpperCase();
        var ul = document.getElementById('remchapt');
        var li = ul.getElementsByTagName("li");
        var msg = 0;
        $('#remchapt').show();
        $('#searchMsgChapters').hide();
        for(var i=0;i<li.length;i++){
            var chapter = li[i].innerText;
            console.log('inside for');
            console.log(chapter);
            if (chapter.toUpperCase().indexOf(filter) > -1) {
                li[i].style.display = "";
                msg = 1;
            }
            else{
                li[i].style.display = "none";
            }

        }
        if(msg==0){
            $('#remchapt').hide();
            $('#searchMsgChapters').show();
        }
    }

    function myFunction(){
        console.log('inside myfunction');
        var subject = $('#searchId').val();
        var filter = subject.toUpperCase();
        var ul = document.getElementById('remSub');
        var li = ul.getElementsByTagName("li");
        var msg = 0;
        $('#searchMsg').hide();
        for(var i=0;i<li.length;i++){
            var subject = li[i].innerText;
            console.log('inside for');
            console.log(subject);
            if (subject.toUpperCase().indexOf(filter) > -1) {
                li[i].style.display = "";
                msg = 1;
            }
            else{
                li[i].style.display = "none";
            }

        }
        if(msg==0){
            $('#searchMsg').show();
        }
    }


    function addClassBtn(){
        console.log('inside addClassBtn');
        var class_val = '';
        class_val = $('.class').val();
        console.log('class_val:'+class_val);
        var sectionArray = [];
        $('.section').each(function(){
            var section_values = $(this).val();
            if(section_values){
            sectionArray.push(section_values);
            }
        });
        for(var i=0;i<sectionArray.length;i++){
            console.log('Section:'+sectionArray[i]);
        }
        if(class_val==''){
            $('#msgClass').html("<h6 style='color:red'>please add class</h6>");
        }else
        if(sectionArray.length==0){
            $('#msgClass').html("<h6 style='color:red'>please add section</h6>");
        }else{
        var check = checkforClass(sectionArray,class_val);
        }

        
    }

    function insertClass(sectionArray,class_val){
        // classSectionArray = JSON.stringify(classSectionArray);
        $.ajax({
            url: "/addClassSection?class_val="+class_val,
            type: "POST",
            contentType: "application/json",
            data: sectionArray,
            success: function (response) {
                console.log('inside success of addClassSection');
                console.log(response);
                if(response){
                    console.log('inserted successfully');
                }
                fetchClass();
                // result = response;
                // addInputNewChapter(result);
            },
            error: function (xhr) {
                window.alert("error occurred while adding Classes");
            }
            
        });
    }

    function checkforClass(sectionArray,class_value){
        console.log('inside checkforClass');
        sectionArray = JSON.stringify(sectionArray);
        console.log('Class value:'+class_value);
        $.ajax({
            url: "/checkforClassSection?class_val="+class_value,
            type: "POST",
            contentType: "application/json",
            data: sectionArray,
            success: function (response) {
                console.log('inside success of addClassSection');
                console.log(response);
                if(response){
                    console.log('class already exist');
                    console.log(response);
                    var response_val = response.toString().split(':')
                    var class_val = response_val[0];
                    var section = response_val[1];
                    console.log("Class:'"+class_val+"'and section:'"+section+"' already exist");
                    $('#msgClass').html("<h6 style='color:red'>*class "+class_val+" - "+section+" already exist</h6>");
                    $('#msgClass').show();
                }else{
                    console.log('class not exist');
                    insertClass(sectionArray,class_value);
                }
                // result = response;
                // addInputNewChapter(result);
            },
            error: function (xhr) {
                window.alert("error occurred while adding Classes");
            }
            
        });
    }

    function fetchClass(){
        $('.classCol').hide();
        $('#classDiv').hide();
        $('.classTextBoxes').hide();
        $('.classBtn').hide();
        $('#msgClass').html('');
        $('#classloader').show();
        
        $.ajax({
            url: "/syllabusClasses?board_id=" + selectedBoardID,
            type: "get",
            data: '',
            success: function (response) {
                console.log('inside generalSyllabusClasses');
                console.log(response);
                responseArr = response.toString().split(',');
                console.log(responseArr)
                var classHTMLRecords = '';
                for (var i = 0; i < responseArr.length; i++) {
                    var class_val = responseArr[i].toString().split(':')[0];
                    var sections = responseArr[i].toString().split(':')[1];
                     sections = sections.replace(/;/g,",");
                    console.log('sections:'+sections)
                    classHTMLRecords = classHTMLRecords +
                        '<a href="javascript:void(0);"><li class="collection-item classVal" id="'+class_val+'" onClick="loadSubjects(' +
                        class_val + ')" name=' +
                        selectedBoardID + ' id=' + class_val + ' >' + class_val + ' - '+ sections +
                        '</li></a>';
                }
                
                $("#classDiv").html(classHTMLRecords);
                $('.classTextBoxes').hide();
                $('.class').val('');
                $('.section').val('');
                $('.classBtn').hide();
                $('#classDiv').show();
                $('.classCol').show();
                $('#classloader').hide();
                
            },
            error: function (xhr) {
                window.alert("error occurred while fetching class list");
            }
        });
    }


    function onclickChapterAdd(){
        $('#modal1').css('height','70%');
        $('#otherChapter').show();
        $('#otherTopic').hide();
        $('.newChapterDiv').hide();
        $('.sugTextChapters').show();
        $('#remchapt').show();
        $('.chapterTopic').show();
        $('#chooseTopic').show();
        $('#suggestionChapterBtn').show();
        $('#inputChapterBtn').hide();
        $('#addTopicBtn').hide();
        $('#inputTopicBtn').hide();
        $('#inputTopicBtn').hide();
        $('#chooseTopic').html('<li>No chapter selected</li>');
        $('#chooseTopic').show();
        $('#searchIdForChapters').show();
        $('#remchapt').css('height','90px');
        $('#searchIdForTopics').hide();
        $('#suggBoxChapter').hide();
        $('#suggBoxTopic').hide();
        $('#chapterText').val('');
        $('#topicText').val('');
        $('#chapNoText').val('');
        $('#msg').hide();
    }

    function onclickTopicAdd(){
        $('#modal1').css('height','61%');
        $('#otherChapter').hide();
        $('#otherTopic').show();
        $('.newChapterDiv').hide();
        $('.sugTextChapters').show();
        $('#remchapt').show();
        $('.chapterTopic').show();
        $('#chooseTopic').show();
        $('#suggestionChapterBtn').hide();
        $('#inputChapterBtn').hide();
        $('#addTopicBtn').show();
        $('#inputTopicBtn').hide();
        $('#searchIdForChapters').hide();
        $('#searchIdForTopics').show();
        $('#remchapt').css('height','40px');
        $('#chapterText').val('');
        $('.topicText').val('');
        $('#chapNoText').val('');
        $('#msg').hide();
        $('#suggBoxChapter').hide();
        $('#suggBoxTopic').hide();
        $('#chooseTopic').html('<li>No chapter selected</li>');
    }

    var x=1
    function appendRow()
    { var ids = '#addRowBtn'+x;
          $(ids).hide();
        var d = document.getElementById('newTextbox');
        console.log('inside appendRow');
        console.log(ids);
        x=x+1;
        d.innerHTML += "<input type='text' style='width:400px;margin-left:68px;color:black;font-size:14px;' id='topic"+x+"' class='topicText' onkeyup = 'spellCheckTopic();'><a id='addRowBtn"+x+"' class='iconAdd' onclick='appendRow();'><i class='fas fa-plus-circle'></i></a></br>";
        
    }

    function showClassText(){
        console.log('inside show class text');
        $('.classTextBoxes').show();
        $('.classCol').hide();
        $('.classBtn').show();
        $('.class').val('');
        $('.section').val('');
        $('#addTextBtn1').show();
        var d = document.getElementById('newTextBoxes');
        
        d.innerHTML = '';
    }

  $(document).ready(function(){
    $('.modal').modal();
  });

    $(document).ready(function(){
    $('.tabs').tabs();
    $('.section1').hide();
      $('.section2').show();
  });

  $('#general').click(function(){
      console.log('inside general');
      $('.section2').hide();
      $('.section1').show();
  });
  $('#specificSchool').click(function(){
      console.log('inside specific School');
    $('.section1').hide();
      $('.section2').show();
  });

  $('#other').click(function(){
      $('.sugText').hide();
      $('#remSub').hide();
      $('#other').hide();
      $('#suggestionBtn').hide();
      $('#inputBtn').show();
      $('#subText').show();
      $('#searchId').hide();
      $('#msgSubject').hide();
      document.getElementById('subText').focus();
      $('#subText').val('');
  });

  $('#otherBook').click(function(){
      $('#otherBook').hide();
      $('#bookText').show();
      $('.sugTextBooks').hide();
      $('#rembok').hide();
      $('#msgBook').hide();
      $('#suggestionBookBtn').hide();
      $('#inputBookBtn').show();
       document.getElementById('bookText').focus();
  });
  $('#otherChapter').click(function(){
      $('#modal1').css('height','45%');
      $('#otherChapter').hide();
      $('#remchapt').hide();
      $('.sugTextChapters').hide();
      $('#suggestionChapterBtn').hide();
      $('#addTopicBtn').hide();
      $('#inputTopicBtn').hide();
      $('#inputChapterBtn').show();
      $('#otherTopic').hide();
      $('.chapNoText').show();
      $('.newChapterDiv').show();
      $('.chapterTopic').hide();
      $('#chooseTopic').hide();
      $('#searchIdForChapters').hide();
      $('#suggBoxChapter').hide();
      $('#suggBoxTopic').hide();
      $('#msg').hide();
      document.getElementById('chapterFocus').focus();
  });

  $('#otherTopic').click(function(){
        $('#modal1').css('height','45%');
      $('#otherChapter').hide();
      $('#otherTopic').hide();
      $('#remchapt').hide();
      $('.sugTextChapters').hide();
      $('#addTopicBtn').hide();
      $('#suggestionChapterBtn').hide();
      $('#addTopicBtn').hide();
      $('#inputChapterBtn').hide();
      $('#inputTopicBtn').show();
      $('.newChapterDiv').show();
      $('.chapterTopic').hide();
      $('#chooseTopic').hide();
      $('#searchIdForTopics').hide();
      $('#msg').hide();
      document.getElementById('chapterFocus').focus();
  });

  var selSub = [];
    var ul = document.getElementById('remSub');
      ul.onclick = function(event) {
      var target = event.target;
      
      console.log(event.target.innerHTML);
      selSub.push(event.target.innerHTML);
}; 
    var selectedChapters = [];
    var ul = document.getElementById('remchapt');
      ul.onclick = function(event) {
      var target = event.target;
      console.log(event.target.innerHTML);
      selectedChapters.push(event.target.innerHTML);
};

    var selectedTopics = [];
    var ul = document.getElementById('chooseTopic');
      ul.onclick = function(event) {
      var target = event.target;
      console.log(event.target.innerHTML); 
      selectedTopics.push(event.target.innerHTML);
};

    var selBok = [];
    var ul = document.getElementById('rembok');
      ul.onclick = function(event) {
      var target = event.target;
      console.log(event.target.innerHTML);
      selBok.push(event.target.innerHTML);
};

    function addTopicBtn(){
        console.log('inside addTopicBtn');
        var chapter = '';
        for(var i=0;i<selectedChapters.length;i++){
        
        console.log('chapter name:'+selectedChapters[i]);
            chapter = selectedChapters[i];
        }
        for(var j=0;j<selectedTopics.length;j++){
        
        console.log('topic name:'+selectedTopics[i]);
        }
        if(chapter==''){
            $('#msg').html("<h5 style='color:red;margin-top:-8px;'>please select chapter</h5>");
            $('#msg').show();
            console.log('if chapter is null');
        }else
        if(selectedTopics.length==0){
             $('#msg').html("<h5 style='color:red;margin-top:-8px;'>please add topics</h5>");
            $('#msg').show();
            console.log('if topic is null');
        }else{
        $('#topicDiv').hide();
        $('.topicCol').hide();
        $('#topicloader').show();
        
        $('#suggBoxChapter').hide();
        $('#suggBoxTopic').hide();
        $('.modal.open').modal('close');
        insertTopic(subjectforChapters,classforChapters,chapter,selectedTopics);
        }
    }

    function addChapterBtn(){
        var chapter = '';
        for(var i=0;i<selectedChapters.length;i++){
        
        console.log('chapter name:'+selectedChapters[i]);
            chapter = selectedChapters[i];
        }
        for(var j=0;j<selectedTopics.length;j++){
        
        console.log('topic name:'+selectedTopics[i]);
        }
        if(selectedChapters.length==0){
            $('#msg').html("<h5 style='color:red;margin-top:-8px;'>please select chapter</h5>");
            $('#msg').show();
        }else 
        if(selectedTopics.length==0){
            $('#msg').html("<h5 style='color:red;margin-top:-8px;'>please add topics</h5>");
            $('#msg').show();
        }else{

        console.log('inside add chapter btn');
        $('#chooseTopic').hide();
        $('.chapterTopic').hide();
        $('#divChapter').hide();
        $('#chapterloader').show();
        
        $('.modal.open').modal('close');
        insertChapter(subjectforChapters,classforChapters,chapter,selectedTopics);
        }
    }

    function deleteFunc(subjectId){
        console.log('inside delete function');
        console.log(subjectId);
        deleteSubject(subjectId,classforSubject,boardforSub);
      

        $('#divSubject').hide();
      $('.remSubject').hide();
      $('.addSubBtn').hide();
      $('.subCol').hide();
      $('#subText').hide();
      $('#msgSubject').hide();
        $('#subjectloader').show();
    }

    function deleteBookFunc(bookId){
        console.log('inside book delete function');
        console.log(bookId);
        deleteBooks(bookId,subjectforBooks,classforBooks);
        // $('#rembok').hide();
        // $('.addBookBtn').hide();
        $('#suggBox').hide();
        $('.remBook').hide();
      $('#divBook').hide();
      $('#bookText').hide();
      $('.sugTextBooks').hide();
      $('#rembok').hide();
      $('#otherBook').hide();
      $('.addBookBtn').hide();
      $('#msgBook').hide();
      $('#Bookloader').show();
    }

    function deleteChapterFunc(chapterNum){
        console.log('inside chapter delete function');
        console.log(chapterNum);
        $('#chapterDiv').hide();
        $('.chapterCol').hide();
        $('#chapterloader').show();
        deleteChapters(chapterNum,bookIdforChapters,subjectforChapters,classforChapters);

    }

    function deleteTopicFunc(topic_id){
        console.log('inside topic delete function');
        console.log(topic_id);
        $('#topicDiv').hide();
        $('.topicCol').hide();
        $('#topicloader').show();
        deleteTopics(topic_id,classforTopics,subjectforTopics,chapterNumforTopics,bookIdforTopics);
    }

    function addInputChapterBtn(){
        console.log('inside add new chapter');
        var topicArray = [];
        $('#suggBoxChapter').hide();
        $('#suggBoxTopic').hide();
        $(".topicText").each(function(){
        // console.log('Topics:'+$(this).val());
        if($(this).val()){
        var topic = $(this).val();
        console.log('Topics: '+topic)
        topicArray.push(topic);
        }
        });
        console.log('topic array length:'+topicArray.length);
        console.log(topicArray);
        var chapterName = $('.chapterText').val();
        var chapter_num = $('.chapNoText').val();
        if(chapterName==''){
            $('#msg').html("<h5 style='color:red;margin-top:-8px;'>please add chapter</h5>");
            $('#msg').show();
        }else
        if(chapter_num){
            // $('#msg').html("<h5 style='color:red;margin-top:-8px;'>please add chapter number</h5>");
            // $('#msg').show();
             var res = checkForChapter(classforChapters,subjectforChapters,bookIdforChapters,chapter_num,chapterName);
        }else
        if(topicArray.length==0){
            $('#msg').html("<h5 style='color:red;margin-top:-8px;'>please add topics</h5>");
            $('#msg').show();
        }else{
        
        console.log('chapter number:'+chapter_num);
        // var res = checkForChapter(classforChapters,subjectforChapters,bookIdforChapters,chapter_num,chapterName);
        // $('.modal.open').modal('close');

        // start
            // var chapterName = $('.chapterText').val();
            // var chapter_num = $('.chapNoText').val();
            $('#divChapter').hide();
        $('#chapterloader').show();
        console.log('chapter number not exist');
        $('.modal.open').modal('close');
        var topic = $('.topicText').val();
        console.log('input chapter:'+chapterName);
        // console.log('input topic:'+topic);
        var topicArray = [];
        $(".topicText").each(function(){
        // console.log('Topics:'+$(this).val());
        var topic = $(this).val();
        console.log('Topics: '+topic)
        topicArray.push(topic);
        
        });
        insertNewChapter(subjectforChapters,classforChapters,bookIdforChapters,chapterName,chapter_num,topicArray);

        // end
        }
    }

    function addInputTopicBtn(){
                    var chapterName = $('.chapterText').val();
            var chapter_num = $('.chapNoText').val();
            var topicArray = [];
        $(".topicText").each(function(){
        // console.log('Topics:'+$(this).val());
        var topic = $(this).val();
        console.log('Topics: '+topic)
        if(topic){
        topicArray.push(topic);
        }
        });
        if(topicArray.length!=0){
        //     $('#divChapter').hide();
        // $('#chapterloader').show();
        console.log('chapter number not exist');
        $('.modal.open').modal('close');
        var topic = $('.topicText').val();
        console.log('input chapter:'+chapterName);
        $('.modal.open').modal('close');
        // console.log('input topic:'+topic);
        
        insertNewTopic(subjectforChapters,classforChapters,bookIdforChapters,chapterName,chapter_num,topicArray);
        $('#topicDiv').hide();
        $('.topicCol').hide();
        $('#topicloader').show();
        $('#suggBoxChapter').hide();
        $('#suggBoxChapter').hide();
        // insertNewChapter(subjectforChapters,classforChapters,bookIdforChapters,chapterName,chapter_num,topicArray);
        }else{
            $('#msg').html("<h5 style='color:red;margin-top:-8px;'>please add topics</h5>");
            $('#msg').show();
        }
    }

    

    

    function addInputNewChapter(res){
        if(res){
            var chapterName = $('.chapterText').val();
            var chapter_num = $('.chapNoText').val();
            $('#divChapter').hide();
        $('#chapterloader').show();
        console.log('chapter number not exist');
        $('.modal.open').modal('close');
        var topic = $('.topicText').val();
        console.log('input chapter:'+chapterName);
        // console.log('input topic:'+topic);
        var topicArray = [];
        $(".topicText").each(function(){
        // console.log('Topics:'+$(this).val());
        var topic = $(this).val();
        console.log('Topics: '+topic)
        topicArray.push(topic);
        
        });
        insertNewChapter(subjectforChapters,classforChapters,bookIdforChapters,chapterName,chapter_num,topicArray);
        }else{
            console.log('inside else chapter number exist');
            $('#msg').html('<h5 style="color:red">chapter already exist</h5>');
            $('#msg').show();
            $('#msg').css('visibility','unset');
        }
    }

    function checkForChapter(class_val,subject,bookId,chapter_num,chapter_name){
        console.log('inside chapter number check');
        var result = '';
         $.ajax({
            url: "/checkForChapter?subject="+subject+"&class_val="+class_val+"&chapter_num="+chapter_num+"&bookId="+bookId+"&chapter_name="+chapter_name,
            type: "POST",
            contentType: "application/json",
            data: "",
            success: function (response) {
                console.log('inside success of checkForChapterNum');
                console.log(response);
                result = response;
                addInputNewChapter(result);
                //   fetchSubject(classforSubject,boardforSub); 
                // fetchChapters(bookId,subject,class_val);
                // fetchChapters(bookIdforChapters,subjectforChapters,classforChapters);                        
            },
            error: function (xhr) {
                window.alert("error occurred while adding indivisual Subject");
            }
            
        });
        return result;
    }

    function addInputBookBtn(){
        var book = $('#bookText').val();
        if(book){
        
        
        console.log('inside addInputBookBtn');
        console.log(book);
        $('#msgBook').hide();
        checkForBook(book,subjectforBooks,classforBooks);
        $('#suggBox').hide();
        }else{
            $('#msgBook').html("<h5 style='color:red;margin-top:-10px;padding:10px;'>please add book</h5>");
            $('#msgBook').show();
        }
    }

    function checkForBook(book,subject,class_val){
        $.ajax({
            url: "/checkForBook?book="+book+"&class_val="+class_val+"&subject="+subject,
            type: "POST",
            contentType: "application/json",
            data: "",
            success: function (response) {
                console.log(response);
                if(response){
                $('#msgBook').html("<h5 style='color:red;margin-top:-10px;padding:10px;'>'"+response+"' book already exist</h5>");
                $('#msgBook').show();
                }
                else{
                    $('#inputBookBtn').hide();
                    $('#bookText').hide();
                    $('#Bookloader').show();
                    insertNewBook(book,subjectforBooks,classforBooks);
                }
            },
            error: function (xhr) {
                window.alert("error occurred while adding indivisual Subject");
            }
        });
    }

    function addInputBtn(){
        var subject = $('#subText').val();
        if(subject){
        
        
        console.log('inside addInputBtn');
        console.log(subject);
        checkForSubject(subject,classforSubject,boardforSub);
        
        }else{
            $('#msgSubject').html("<h5 style='color:red;margin-top:-10px;padding:10px;'>please add subject</h5>");
            $('#msgSubject').show();
        }
    }

    function checkForSubject(subject,class_val,board){
        $.ajax({
            url: "/checkForSubject?subject="+subject+"&class_val="+class_val+"&board="+board,
            type: "POST",
            contentType: "application/json",
            data: "",
            success: function (response) {
                console.log(response);
                if(response){
                    $('#msgSubject').html("<h5 style='color:red;margin-top:-10px;padding:10px;'>'"+response+"' subject already exist</h5>");
                    $('#msgSubject').show();
                }else{
                    $('#inputBtn').hide();
                    $('#subText').hide();

                    $('#divSubject').hide();
                    $('.remSubject').hide();
                    $('.addSubBtn').hide();
                    $('.subCol').hide();
                    $('#msgSubject').hide();
                    $('#subjectloader').show();
                    insertNewSubject(subject,classforSubject,boardforSub);
                }
                                    
            },
            error: function (xhr) {
                window.alert("error occurred while adding indivisual Subject");
            }
        });
    }


  function addBookBtn(){
      console.log('inside addBookBtn');
      if(selBok.length>0){
      $('.remBook').hide();
      $('#msgBook').hide();
      $('#divBook').hide();
      $('.sugTextBooks').hide();
      $('#rembok').hide();
      $('#otherBook').hide();
      $('.addBookBtn').hide();
      
    //   $('.subCol').hide();
      $('#Bookloader').show();
      for(var i=0;i<selBok.length;i++){
          console.log(selBok.length);
          console.log(selBok[i]);
            insertBook(selBok[i],classforBooks,subjectforBooks,i,selBok.length);
          console.log('after insert Book Data');
        }
      }else{
          $('#msgBook').html("<h5 style='color:red;margin-top:-10px;padding:10px;'>please add book</h5>");
          $('#msgBook').show();
      }
  }

  function addBtn(){
      console.log('inside add btn');
      if(selSub.length==0){
          $('#msgSubject').html("<h5 style='color:red;margin-top:-10px;padding:10px;'>please add subject</h5>");
          $('#msgSubject').show();
      }else{
      $('#msgSubject').hide();
      $('#divSubject').hide();
      $('.remSubject').hide();
      $('.addSubBtn').hide();
      $('.subCol').hide();
        $('#subjectloader').show();
      console.log('inside addBtn');
      for(var i=0;i<selSub.length;i++){
          console.log(selSub.length);
          console.log(selSub[i]);
            insertSubject(selSub[i],classforSubject,boardforSub,i,selSub.length);
          console.log('after insert Data');
        }
        // fetchSubject(classforSubject,boardforSub);
        
      }
  }

  function deleteTopics(topic_id,class_val,subject,chapterNum,bookId){
      $.ajax({
            url: "/deleteTopics?subject="+subject+"&class_val="+class_val+"&bookId="+bookId+"&chapter_num="+chapterNum+"&topic_id="+topic_id,
            type: "POST",
            contentType: "application/json",
            data: "",
            success: function (response) {
                console.log(response);
                //   fetchSubject(classforSubject,boardforSub); 
                fetchTopics(boardforTopics,subjectIdforTopics,subjectforTopics,classforTopics,chapterNumforTopics,bookIdforTopics);                       
            },
            error: function (xhr) {
                window.alert("error occurred while adding indivisual Subject");
            }
        });
  }

  function deleteChapters(chapterNum,bookId,subject,class_val){
      $.ajax({
            url: "/deleteChapters?subject="+subject+"&class_val="+class_val+"&bookId="+bookId+"&chapter_num="+chapterNum,
            type: "POST",
            contentType: "application/json",
            data: "",
            success: function (response) {
                console.log(response);
                //   fetchSubject(classforSubject,boardforSub); 
                fetchChapters(classforChapters,subjectforChapters,subjectIdforChapters,bookIdforChapters,boardIdforChapters);                       
            },
            error: function (xhr) {
                window.alert("error occurred while adding indivisual Subject");
            }
        });
  }

  function deleteBooks(bookId,subject,class_val){
      $.ajax({
            url: "/deleteBook?subject="+subject+"&class_val="+class_val+"&bookId="+bookId,
            type: "POST",
            contentType: "application/json",
            data: "",
            success: function (response) {
                console.log(response);
                //   fetchSubject(classforSubject,boardforSub); 
                fetchBooks(classforBooks,subjectforBooks,subjectIdforBooks,boardforBooks);                       
            },
            error: function (xhr) {
                window.alert("error occurred while adding indivisual Subject");
            }
        });
  }

  function deleteSubject(subjectId,class_val,board){
      $.ajax({
            url: "/deleteSubject?subjectId="+subjectId+"&class_val="+class_val+"&board="+board,
            type: "POST",
            contentType: "application/json",
            data: "",
            success: function (response) {
                console.log(response);
                  fetchSubject(classforSubject,boardforSub);  

            },
            error: function (xhr) {
                window.alert("error occurred while adding indivisual Subject");
            }
        });
  }


  function insertNewTopic(subject,class_val,book_id,chapter,chapter_num,topics){
      topics = JSON.stringify(topics);
      console.log('inside insert new topic');
      $.ajax({
            url: "/addNewTopic?book_id="+book_id+"&class_val="+class_val+"&subject="+subject+"&chapter="+chapter+"&chapter_num="+chapter_num,
            type: "POST",
            contentType: "application/json",
            data: topics,
            success: function (response) {
                console.log(response);
                 fetchTopics(boardforTopics,subjectIdforTopics,subjectforTopics,classforTopics,chapterNumforTopics,bookIdforTopics);                        
            },
            error: function (xhr) {
                window.alert("error occurred while adding indivisual Subject");
            }
        });
  }

  function insertNewChapter(subject,class_val,book_id,chapter,chapter_num,topics){
      topics = JSON.stringify(topics);
      $.ajax({
            url: "/addNewChapter?book_id="+book_id+"&class_val="+class_val+"&subject="+subject+"&chapter="+chapter+"&chapter_num="+chapter_num,
            type: "POST",
            contentType: "application/json",
            data: topics,
            success: function (response) {
                console.log(response);
                  fetchChapters(classforChapters,subjectforChapters,subjectIdforChapters,bookIdforChapters,boardIdforChapters);                        
            },
            error: function (xhr) {
                window.alert("error occurred while adding indivisual Subject");
            }
        });
  }

  function insertNewBook(book,subject,class_val){
      $.ajax({
            url: "/addNewBook?book="+book+"&class_val="+class_val+"&subject="+subject,
            type: "POST",
            contentType: "application/json",
            data: "",
            success: function (response) {
                console.log(response);
                  fetchBooks(classforBooks,subjectforBooks,subjectIdforBooks,boardforBooks);                        
            },
            error: function (xhr) {
                window.alert("error occurred while adding indivisual Subject");
            }
        });
  }

  function insertNewSubject(subjectName,class_val,board){
      $.ajax({
            url: "/addNewSubject?subject="+subjectName+"&class_val="+class_val+"&board="+board,
            type: "POST",
            contentType: "application/json",
            data: "",
            success: function (response) {
                console.log(response);
                  fetchSubject(classforSubject,boardforSub);                        
            },
            error: function (xhr) {
                window.alert("error occurred while adding indivisual Subject");
            }
        });
  }

  function insertTopic(subject,class_val,chapterName,topicName){
      topicName = JSON.stringify(topicName);
      console.log('inside insert topic');
      $.ajax({
            url: "/addChapter?class_val="+class_val+"&subject="+subject+"&chapterName="+chapterName,
            type: "POST",
            contentType: "application/json",
            data: topicName,
            success: function (response) {
                fetchTopics(boardforTopics,subjectIdforTopics,subjectforTopics,classforTopics,chapterNumforTopics,bookIdforTopics);                      
            },
            error: function (xhr) {
                window.alert("error occurred while adding chapters");
            }
        });
  }

  function insertChapter(subject,class_val,chapterName,topicName){
    //   chapterName = JSON.stringify(chapterName);
      topicName = JSON.stringify(topicName);
      $.ajax({
            url: "/addChapter?class_val="+class_val+"&subject="+subject+"&chapterName="+chapterName,
            type: "POST",
            contentType: "application/json",
            data: topicName,
            success: function (response) {
                fetchChapters(classforChapters,subjectforChapters,subjectIdforChapters,bookIdforChapters,boardIdforChapters);                     
            },
            error: function (xhr) {
                window.alert("error occurred while adding chapters");
            }
        });
  }

  function insertBook(bookName,class_val,subject,index,length){
      $.ajax({
            url: "/addBook?book="+bookName+"&class_val="+class_val+"&subject="+subject,
            type: "POST",
            contentType: "application/json",
            data: "",
            success: function (response) {
                console.log(response);
                if(index==length-1){
                 fetchBooks(classforBooks,subjectforBooks,subjectIdforBooks,boardforBooks); 
                 selBok = [];
                }                           
            },
            error: function (xhr) {
                window.alert("error occurred while adding indivisual Subject");
            }
        });
  }

  function insertSubject(subjectName,class_val,board,index,length){
      $.ajax({
            url: "/addSubject?subject="+subjectName+"&class_val="+class_val+"&board="+board,
            type: "POST",
            contentType: "application/json",
            data: "",
            success: function (response) {
                console.log(response);
                if(index==length-1){
                 fetchSubject(classforSubject,boardforSub); 
                 selSub = [];
                }                           
            },
            error: function (xhr) {
                window.alert("error occurred while adding indivisual Subject");
            }
        });
  }

  function fetchTopics(boardforTopics,subjectIdforTopics,subjectforTopics,classforTopics,chapterNumforTopics,bookIdforTopics){
      $.ajax({
            url: "/fetchTopics?class_val=" + classforTopics +
                "&subject=" + subjectforTopics + "&chapter_num=" + chapterNumforTopics+"&bookId="+bookIdforTopics,
            type: "get",
            data: '',
            success: function (response) {
                responseArr = response.toString().split(',');
                //alert(responseArr.length);
                var topicHTMLRecords = "";
                for (var i = 0; i < responseArr.length; i++) {
                    var topicID = responseArr[i].toString().split(':')[0];
                    var topicName = responseArr[i].toString().split(':')[1];
                    //alert(responseArr[i]);
                    topicHTMLRecords = topicHTMLRecords +
                        '<a href="#modal2" class="modal-trigger"><li class="topicItem" style="padding: 10px 5px;" name = "' +
                            topicID + '" id="' + topicID + 'topic" onClick=loadQuestions("' + topicID +'",'+classforTopics+','+subjectIdforTopics+','+boardforTopics+','+chapterNumforTopics+'); >' + topicName +
                        '</li></a><div class="delIconTopics" onclick=deleteTopicFunc('+topicID+'); style="margin-top:-30px;color:forestgreen;"><i class="fas fa-minus-circle" id="deleteIcon"></i></div>';
                }
                $("#topicDiv").html(topicHTMLRecords);
                
                
                $('#topicDiv').show();
                $('.topicCol').show();
                $('#topicloader').hide();
            },
            error: function (xhr) {
                window.alert("error occurred while fetching book list");
            }
        });
  }

  function fetchChapters(classforChapters,subjectforChapters,subjectIdforChapters,bookIdforChapters,boardIdforChapters){
      $.ajax({
          url: "/fetchChapters?class_val="+classforChapters+"&subject="+subjectforChapters+"&bookId="+bookIdforChapters,
          type: "POST",
          contentType: "application/json",
          data: "",
          success: function(response){
              
                // alert(responseArr.length);
                var chapterHTMLRecords = "";
                if(response){
                responseArr = response.toString().split(',');
                for (var i = 0; i < responseArr.length; i++) {
                    // alert(responseArr[i]);
                    var chapterNum = responseArr[i].toString().split(':')[0];
                    var chapterName = responseArr[i].toString().split(':')[1];
                    // var chapter = responseArr[i].toString().split(':')[1];
                    // alert(chapterNum + " and " + chapterName);
                    var parameters ="\""+chapterName + "\"" + "," + "\"" + subjectforChapters +"\"," + subjectIdforChapters + "," + classforChapters + "," + boardIdforChapters+","+chapterNum;
                    chapterHTMLRecords = chapterHTMLRecords +
                    '<a href="javascript:void(0);"><li class="chapterColor chapterItem'+chapterNum+'" style="padding: 10px 5px;" id="'+chapterName+'" onClick=loadTopics("' + subjectforChapters +'",'+ subjectIdforChapters + ',' + classforChapters + ',' + boardIdforChapters+','+chapterNum+','+bookIdforChapters+'); >' + chapterName +
                            '</li><div class="delIconChapter" onclick=deleteChapterFunc('+chapterNum+'); style="margin-top:-30px;color:forestgreen;"><i class="fas fa-minus-circle" id="deleteIcon"></i></div></a>';
                }
                }else{
                    chapterHTMLRecords = chapterHTMLRecords + '<li style="padding: 10px 5px;">No data available</li>'
                }

                $("#chapterDiv").html(chapterHTMLRecords);
                $('#divChapter').show();
                $('#chapterDiv').show();
                $('.chapterCol').show();
                $('#chapterloader').hide();
                
                
                // $('.addChapterBtn').hide();
                // $('#chapterloader').hide();
            },
            error: function (xhr) {
                window.alert("error occurred while fetching book list");
            }
      });
  }

  function fetchBooks(class_val,subject,subjectIdforBooks,boardforBooks){
      $.ajax({
          url: "/fetchBooks?class_val="+class_val+"&subject="+subject,
          type: "POST",
          contentType: "application/json",
          data: "",
          success: function(response){
              console.log('inside fetch books success');
              var bookHTMLRecords = "";
              if(response){
              responseArr = response.toString().split(',');
                // alert(responseArr);
                
                for (var i = 0; i < responseArr.length; i++) {
                    //alert(responseArr[i]);
                    var bookID = responseArr[i].toString().split(':')[0];
                    var bookName = responseArr[i].toString().split(':')[1];
                    console.log('inside book syllabus:'+bookID);
                    var parameters = "\"" + subject +
                        "\"," + bookID+',' + subjectIdforBooks + ',' + class_val + ',' + boardforBooks;
                        console.log('Books Records in parameters:'+parameters);
                    bookHTMLRecords = bookHTMLRecords +
                        '<a href="javascript:void(0);"><li class="bookItem" style="padding: 10px 5px;" id="'+bookID+'book" onClick=loadChapters(' +
                        parameters + '); name=' +
                        boardforBooks + '>' + bookName +
                        '</li></a><div class="delIconBooks" onclick=deleteBookFunc('+bookID+'); style="margin-top:-30px;color:forestgreen;"><i class="fas fa-minus-circle" id="deleteIcon"></i></div>';
                    // bookArray.push(bookID+':'+bookName);
                }
              }else{
                  bookHTMLRecords = bookHTMLRecords +
                  '<li style="padding: 10px 5px;">No data available</li>'
              }
                $('#bookDiv').html("");
                $("#bookDiv").html(bookHTMLRecords);
                $('#divBook').show();
                $('#bookText').hide();
                $('.bookCol').show();
                $('#Bookloader').hide();
            },
            error: function (xhr) {
                window.alert("error occurred while fetching book list");
            }
      });
  }

  function fetchSubject(class_val,board){
      $.ajax({
            url: "/fetchSubjects?class_val="+class_val+"&board="+board,
            type: "POST",
            contentType: "application/json",
            data: "",
            success: function (response) {
                console.log('inside fetch Subject success');
                var subjectHTMLRecord = "";
                if(response){
                responseArr = response.toString().split(',');
                //alert(responseArr.length);
                subArray = [];
                for (var i = 0; i < responseArr.length; i++) {
                    var subjectID = responseArr[i].toString().split(':')[0];
                    var subjectName = responseArr[i].toString().split(':')[1];
                    console.log('inside for loop');
                    console.log(subjectID);
                    console.log(subjectName);
                    var parameters = "\"" + subjectName + "\"" + ',' + subjectID + ',' + class_val +
                        ',' + board;
                    subjectHTMLRecord = subjectHTMLRecord +
                        '<a href="javascript:void(0);"><li class="subjectItem" style="padding: 10px 5px;" id="'+subjectName+'" onClick=loadBooks(' +
                        parameters + '); name=' +
                        responseArr[i].toString().split(':')[0] + '><span>' + responseArr[i].toString()
                        .split(':')[1] +
                        '</li></a><div class="delIcon" onclick=deleteFunc('+subjectID+'); style="margin-top:-30px;color: forestgreen;"><i class="fas fa-minus-circle" id="deleteIcon"></i></div>';
                    // alert(responseArr[i].toString().split(':')[0]);
                    subArray.push(subjectName);
                }
                // $("#subjectDiv").hide();
                }else{
                    subjectHTMLRecord = subjectHTMLRecord + "<li>Not Available</li>"
                }
                $("#subjectDiv").html(subjectHTMLRecord);
                // $('#updatedSubjectDiv').show();
                $('#divSubject').show();
                $('.subCol').show();
                $('#msgSubject').hide();
                $('#subjectloader').hide();
                $('#other').show();
                $('#searchId').hide();
                                             
            },
            error: function (xhr) {
                window.alert("error occurred while display Subject Subject");
            }
        });
  }


    //$('#selected_sub_id').val($(this).attr("name"));

    

    function remBookList(){
        // $('#otherBook').show();
        $('#bookCol').hide();
        $('#bookText').val('');
        $('#Bookloader').show();
        console.log('inside remBookList');
        $('#suggBox').hide();
        // $('#inputBookBtn').show();
        fetchRemBooks(subjectforBooks,classforBooks);
        
    }

    function fetchRemSubjects(class_val){
        $.ajax({
            url: "/fetchRemSubjects?class_val="+class_val,
            type: "POST",
            contentType: "application/json",
            data: "",
            success: function (response) {
                var remSubjectHTMLRecords = "";
                console.log('inside fetchRemSubjects :'+response);
                if(response!=''){
                    responseArr = response.toString().split(',');
                // alert(responseArr);
                
                for (var i = 0; i < responseArr.length; i++) {
                    //alert(responseArr[i]);
                    var subjectID = responseArr[i].toString().split(':')[0];
                    var subjectName = responseArr[i].toString().split(':')[1];
                    
                    remSubjectHTMLRecords = remSubjectHTMLRecords +
                    '<a href="javascript:void(0);" id="'+i+'"><li class="subjectRemItem" id="'+subjectID+'id" onclick=onColor("'+subjectID+'"); style="padding: 10px 5px;">' + subjectName +
                        '</li></a>';
                }
                }else{
                    console.log('inside else');
                    remSubjectHTMLRecords = remSubjectHTMLRecords +
                    '<li>No suggestions available</li>'
                }
                console.log('Before adding Rem Subjects');
                $("#remSub").html(remSubjectHTMLRecords);
                $('.addSubBtn').show();
                $('.remSubject').show();
                $('.sugText').show();
                $('#remSub').show();
                $('#searchId').show();
                $('#other').show();
                $('#suggestionBtn').show();
                $('#inputBtn').hide();
                $('#subjectloader').hide();
                },
            error: function (xhr) {
                window.alert("error occurred while display suggestion subjects");
            }
        });
    }

    function fetchRemChapters(class_val,subject,bookId){
        $.ajax({
            url: "/fetchRemChapters?class_val="+class_val+"&subject="+subject+"&bookId="+bookId,
            type: "POST",
            contentType: "application/json",
            data: "",
            success: function (response) {
                var remChapterHTMLRecords = "";
                console.log('inside fetchRemChapters :'+response);
                if(response!=''){
                    responseArr = response.toString().split(',');
                // alert(responseArr);
                
                for (var i = 0; i < responseArr.length; i++) {
                    //alert(responseArr[i]);
                    var chapterID = responseArr[i].toString().split(':')[0];
                    var chapterName = responseArr[i].toString().split(':')[1];
                    console.log('inside chapter syllabus:'+chapterID);       
                    remChapterHTMLRecords = remChapterHTMLRecords +
                    '<a href="javascript:void(0);"><li class="chapterRemItem" onclick=onColor("'+chapterID+'");chapterTopic("'+class_val+'","'+subject+'","'+chapterID+'"); id="'+chapterID+'ids" onclick=onColor("'+chapterID+'");>' + chapterName +
                        '</li></a>';
                }
                }else{
                    console.log('inside else');
                    remChapterHTMLRecords = remChapterHTMLRecords +
                    '<li>No suggestions available</li>'
                }
                $('#remchaptloader').hide();
                $("#remchapt").html(remChapterHTMLRecords);
                $('#remchapt').show();
                // $('.chapterCol').hide();
                // $('.addChapterBtn').show();
                // $('.remChapters').show();
                // $('#remchapt').show();
                // $('#chapterText').hide();
                
                },
            error: function (xhr) {
                window.alert("error occurred while display Subject Subject");
            }
        });
    }
    
    function chapterTopic(class_val,subject,chapter_num){
        console.log('inside chapterTopic');
        var s = '#'+chapter_num+'ids';
        $("#chooseTopic").html('');
        $('#chooseTopic').hide();
        $('.chapterTopic').hide();
        $('#chooseTopicloader').show();
        {% for chapter  in chapterNum %}
            var chapterNumber = '#{{chapter.chapter_num}}ids';

            $(chapterNumber).css('background-color','');
            $(chapterNumber).css('color','');

        {% endfor %}
        $(s).css('background-color','lightseagreen');
        $(s).css('color','white');
        console.log(class_val+' '+subject+' '+chapter_num);
        $.ajax({
            url: "/chapterTopic?class_val="+class_val+"&subject="+subject+"&chapter_num="+chapter_num,
            type: "POST",
            contentType: "application/json",
            data: "",
            success: function(response){
                // #chooseTopic
                var chapterTopicHTMLRecords = "";
                console.log('inside chapterTopic :'+response);
                if(response!=''){
                    responseArr = response.toString().split(',');
                // alert(responseArr);
                
                for (var i = 0; i < responseArr.length; i++) {
                    //alert(responseArr[i]);
                    var topicID = responseArr[i].toString().split(':')[0];
                    var topicName = responseArr[i].toString().split(':')[1];
                    console.log('inside chapterTopic:'+topicID);
                    
                    chapterTopicHTMLRecords = chapterTopicHTMLRecords +
                    '<a href="javascript:void(0);"><li class="chapterTopicItem" onclick=onColor("'+topicID+'");; id="'+topicID+'id">'+ topicName +
                        '</li></a>';
                }
                }else{
                    console.log('inside else');
                    chapterTopicHTMLRecords = chapterTopicHTMLRecords +
                    '<li>No Topics available</li>'
                }
                $("#chooseTopic").html(chapterTopicHTMLRecords);
                $('#chooseTopicloader').hide();
                $('.chapterTopic').show();
                $('#chooseTopic').show();
                
            },
            error: function(xhr){
                window.alert('error occurred while loading topics');
            }
        });
    }

    function fetchRemBooks(subjectforBooks,classforBooks){
        $.ajax({
            url: "/fetchRemBooks?class_val="+classforBooks+"&subject="+subjectforBooks,
            type: "POST",
            contentType: "application/json",
            data: "",
            success: function (response) {
                var remBookHTMLRecords = "";
                console.log('inside fetchRemBook :'+response);
                if(response){
                    responseArr = response.toString().split(',');
                // alert(responseArr);
                
                for (var i = 0; i < responseArr.length; i++) {
                    //alert(responseArr[i]);
                    var bookID = responseArr[i].toString().split(':')[0];
                    var bookName = responseArr[i].toString().split(':')[1];
                    console.log('inside book syllabus:'+bookID);
                    
                    remBookHTMLRecords = remBookHTMLRecords +
                    '<a href="javascript:void(0);"><li class="bookRemItem" id="'+bookID+'id" onclick=onColor("'+bookID+'"); style="padding: 10px 5px;">' + bookName +
                        '</li></a>';
                }
                }else{
                    remBookHTMLRecords = remBookHTMLRecords +
                    '<li style="padding: 10px 5px;">No suggestions available</li>'
                }
                $("#rembok").html(remBookHTMLRecords);

                $('.bookCol').hide();
                $('.addBookBtn').show();
                $('.remBooks').show();
                $('#rembok').show();
                $('#bookText').hide();
                $('#otherBook').show();
                $('.sugTextBooks').show();
                $('#suggestionBookBtn').show();
                $('#inputBookBtn').hide();
                $('#Bookloader').hide();
                },
            error: function (xhr) {
                window.alert("error occurred while display Books");
            }
        });
    }

    // var selectedChapters = '';
    function selectedChapter(){
        console.log('inside selected chapters');
        $.ajax({
            url: "/selectedChapter?chapterNum=" + chapterNumforTopics+"&class_val="+classforChapters+"&subject="+subjectforChapters,
            type: "get",
            data: '',
            success: function (response) {
                var remChapterHTMLRecords = '';
                for(var i=0;i<response.length;i++){
                    var chapterID = response[i].toString().split(':')[1];
                    var chapterName = response[i].toString().split(':')[0];
                    remChapterHTMLRecords = remChapterHTMLRecords +
                    '<a href="javascript:void(0);"><li class="chapterRemItem" onclick=onColor("'+chapterID+'");chapterTopic("'+classforChapters+'","'+subjectforChapters+'","'+chapterID+'"); id="'+chapterID+'ids" onclick=onColor("'+chapterID+'");>' + chapterName +
                        '</li></a>';
                         $('.chapterText').val(chapterName);
                        $('.chapNoText').val(chapterID);
                        $('.chapterText').attr('readonly', 'true');
                        $('.chapNoText').attr('readonly', 'true');
                        // selectedChapters = chapterName;
                }
               
                $("#remchapt").html(remChapterHTMLRecords);
                $('#remchapt').show();
                $('#addTopicBtn').show();
                $('.remchapters').show();
                $('#suggestionChapterBtn').hide();
                $('.addChapterBtn').show();
            },
            error:function(xhr){

            }
        });
        

        
    }

    function remChapterList(){
        $('#remchapt').hide();
        $('#remchaptloader').show();
        console.log('inside remChapterList');
        $('.remchapters').show();
        $('.addChapterBtn').show();
        $('.chapterText').val('');
        $('.chapNoText').val('');
        $('.chapterText').attr('readonly', false);
        $('.chapNoText').attr('readonly', false);
        fetchRemChapters(classforChapters,subjectforChapters,bookIdforChapters);
    }

    function remSubList(){
        $('.subCol').hide();
        
        $('#subjectloader').show();
        console.log('inside remSubList');
        fetchRemSubjects(classforSubject);
    }

    function onColor(subject){
        var ids = '#'+subject+'id';
        $(ids).css('background-color','lightseagreen');
        $(ids).css('color','white');
    }
    var selectedBoardID = '';
    $('.generalBoardClass').click(function(){
        $('.generalBoardClass').css('background-color','lightseagreen');
        $('.generalBoardClass').css('color','white');
        selectedBoardID = this.id;
        var classHTMLRecords = "";
        $('#generalClassDiv').hide();
        $('#generalClassLoader').show();
        $.ajax({
            url: "/generalSyllabusClasses?board_id=" + selectedBoardID,
            type: "get",
            data: '',
            success: function (response) {
                console.log('inside generalSyllabusClasses');
                console.log(response);
                responseArr = response.toString().split(',');
                console.log(responseArr)
                for (var i = 0; i < responseArr.length; i++) {
                    var class_val = responseArr[i].toString().split(':')[0];
                    var sections = responseArr[i].toString().split(':')[1];
                     sections = sections.replace(/;/g,",");
                    console.log('sections:'+sections)
                    classHTMLRecords = classHTMLRecords +
                        '<a href="javascript:void(0);"><li class="collection-item classVal" id="'+class_val+'general" onClick="generalLoadSubjects(' +
                        class_val + ')" name=' +
                        selectedBoardID + ' id=' + class_val + ' >' + class_val + ' - '+ sections +
                        '</li></a>';
                }
                
                $("#generalClassDiv").html(classHTMLRecords);
                $('#generalClassLoader').hide();
                $('#generalClassDiv').show();
                
                
            },
            error: function (xhr) {
                window.alert("error occurred while fetching class list");
            }
        });
    });


    
    var responseArr = [];
    var selectedBoardID = "";
    var selectedClassVal = "";
    var selectedSubjectVal = "";
    var selectedSubjectID = "";
    var  selectedChapterNum = "";
    var  selectedChapterName = "";
    var boardforSub = '';

    $('.boardClass').click(function () {
        var classHTMLRecords = "";
        $('.classCol').hide();
        selectedBoardID = this.id;
        boardforSub = selectedBoardID;
        $('.boardClass').css('background-color','lightseagreen');
        $('.boardClass').css('color','white');
        $('#classDiv').hide();
        $('#msgClass').html('');
        $('.classTextBoxes').hide();
        $('.classBtn').hide();
        
        $('#classloader').show();
        $.ajax({
            url: "/syllabusClasses?board_id=" + selectedBoardID,
            type: "get",
            data: '',
            success: function (response) {
                console.log('inside generalSyllabusClasses');
                console.log(response);
                responseArr = response.toString().split(',');
                console.log(responseArr)
                for (var i = 0; i < responseArr.length; i++) {
                    var class_val = responseArr[i].toString().split(':')[0];
                    var sections = responseArr[i].toString().split(':')[1];
                     sections = sections.replace(/;/g,",");
                    console.log('sections:'+sections)
                    classHTMLRecords = classHTMLRecords +
                        '<a href="javascript:void(0);"><li class="collection-item classVal" id="'+class_val+'" onClick="loadSubjects(' +
                        class_val + ')" name=' +
                        selectedBoardID + ' id=' + class_val + ' >' + class_val + ' - '+ sections +
                        '</li></a>';
                }
                
                $("#classDiv").html(classHTMLRecords);
                
                $('#classDiv').show();
                $('.classCol').show();
                $('#classloader').hide();
                
            },
            error: function (xhr) {
                window.alert("error occurred while fetching class list");
            }
        });
    });


    function generalLoadSubjects(selectedClassVal){
        $('#generalSubjectDiv').hide();
        $('#generalSubjectLoader').show();
        // classforSubject = selectedClassVal;
        {% for class in classValuesGeneral %}
            var desc = "{{class.class_val}}";
            var clasId = '#'+desc.toString()+'general';
            $(clasId).css('background-color','');
            $(clasId).css('color','');
            console.log('inside for'+clasId);
        {% endfor %}
        
        var classId = '#'+selectedClassVal.toString()+'general';
        console.log('outside for:'+selectedClassVal);
        $(classId).css('background-color','lightseagreen');
        $(classId).css('color','white');
        console.log('inside loadSubjects'+selectedClassVal);
        $.ajax({
            url: "/generalSyllabusSubjects?board_id=" + selectedBoardID + "&class_val=" + selectedClassVal,
            type: "get",
            data: '',
            success: function (response) {
                
                //alert(responseArr.length);
                var subjectHTMLRecords = "";
                console.log('inside load Subjects');
                console.log(response);
                if(response){
                responseArr = response.toString().split(',');
                for (var i = 0; i < responseArr.length; i++) {
                    var subjectID = responseArr[i].toString().split(':')[0];
                    var subjectName = responseArr[i].toString().split(':')[1];
                    console.log('inside for loop');
                    console.log(subjectID);
                    console.log(subjectName);
                    subject_name = subjectName.replace(/ /g,"_");
                    var parameters = "\"" + subject_name + "\"" + ',' + subjectID + ',' + selectedClassVal +
                        ',' + selectedBoardID;
                    subjectHTMLRecords = subjectHTMLRecords +
                        '<a href="javascript:void(0);"><li class="subjectItem" style="padding: 10px 5px;" id="'+subject_name+'general" onClick=generalLoadBooks(' +
                        parameters + '); name=' +
                        responseArr[i].toString().split(':')[0] + '><span>' + responseArr[i].toString()
                        .split(':')[1] + '</span>' +
                        '</li></a>';
                    // alert(responseArr[i].toString().split(':')[0]);
                    // subArray.push(subjectName+':'+subjectID);
                     
                }
                }else{
                    // subjectHTMLRecord = '';
                    subjectHTMLRecords = subjectHTMLRecords + '<li class="subjectItem">Not Available</li>'
                }
                
                $("#generalSubjectDiv").html(subjectHTMLRecords);
                // $('#updatedSubjectDiv').hide();
                $('#generalSubjectDiv').show();
                $('#generalSubjectLoader').hide();
            },
            error: function (xhr) {
                window.alert("error occurred while fetching subject list");
            }
        });
    }

    //$('.classVal').click(function () {
    var subArray = [];
    var bookArray = [];
    var classforSubject = '';
    function loadSubjects(selectedClassVal) {

        $('#divSubject').hide();
        $('#searchId').hide();
        $('#subjectloader').show();
        // hide
        $('.classTextBoxes').hide();
        $('.classBtn').hide();
        $('.classCol').show();
        $('#msgClass').hide();
        $('.sugText').hide();
        $('#remSub').hide();
        $('#searchMsg').hide();
        $('#other').hide();
        $('#subText').hide();
        $('#suggestionBtn').hide();
        $('#inputBtn').hide();
        $('.subCol').hide();
        // end
        classforSubject = selectedClassVal;
        {% for class in classValues %}
            var desc = "{{class.class_val}}";
            var clasId = '#'+desc.toString();
            $(clasId).css('background-color','');
            $(clasId).css('color','');
            console.log('inside for'+clasId);
        {% endfor %}
        
        var classId = '#'+selectedClassVal.toString();
        console.log('outside for:'+selectedClassVal);
        $(classId).css('background-color','lightseagreen');
        $(classId).css('color','white');
        console.log('inside loadSubjects'+selectedClassVal);
        $.ajax({
            url: "/syllabusSubjects?board_id=" + selectedBoardID + "&class_val=" + selectedClassVal,
            type: "get",
            data: '',
            success: function (response) {
                
                //alert(responseArr.length);
                var subjectHTMLRecords = "";
                console.log('inside load Subjects');
                console.log(response);
                if(response){
                responseArr = response.toString().split(',');
                for (var i = 0; i < responseArr.length; i++) {
                    var subjectID = responseArr[i].toString().split(':')[0];
                    var subjectName = responseArr[i].toString().split(':')[1];
                    console.log('inside for loop');
                    console.log(subjectID);
                    console.log(subjectName);
                    subject_name = subjectName.replace(/ /g,"_");
                    console.log('New name:'+subject_name);
                    var parameters = "\"" + subject_name + "\""+ "," + subjectID + ',' + selectedClassVal +
                        ',' + selectedBoardID;
                    subjectHTMLRecords = subjectHTMLRecords +
                        '<a href="javascript:void(0);"><li class="subjectItem" style="padding: 10px 5px;padding-right:15px;" id="'+subject_name+'" onClick=loadBooks(' +
                        parameters + '); name=' +
                        responseArr[i].toString().split(':')[0] + '><span>' + responseArr[i].toString()
                        .split(':')[1] + '</span>' +
                        '</li></a><div class="delIcon" onclick=deleteFunc('+subjectID+'); style="margin-top:-30px;color: forestgreen;"><i class="fas fa-minus-circle" id="deleteIcon"></i></div>';
                    // alert(responseArr[i].toString().split(':')[0]);
                    subArray.push(subjectName+':'+subjectID);
                     
                }
                }else{
                    // subjectHTMLRecord = '';
                    subjectHTMLRecords = subjectHTMLRecords + '<li class="subjectItem">Not Available</li>'
                }
                
                $("#subjectDiv").html(subjectHTMLRecords);
                // $('#updatedSubjectDiv').hide();
                $('#divSubject').show();
                $('.subCol').show();
                $('#msgSubject').hide();
                $('#subjectloader').hide();
            },
            error: function (xhr) {
                window.alert("error occurred while fetching subject list");
            }
        });
        
        //});  
    }

    
    function generalLoadBooks(selectedSubjectVal, selectedSubjectID, selectedClassVal, selectedBoardID){
        $('#generalDivBooks').hide();
        $('#generalBookLoader').show(); 
        selectedSubjectVal = selectedSubjectVal.replace(/_/g," ");
        // classforBooks = selectedClassVal;
        // subjectforBooks = selectedSubjectVal;
        // subjectIdforBooks = selectedSubjectID;
        // boardforBooks = selectedBoardID;
        {% for sub in subjectValues %}
            var subVal = "{{sub.description}}";
            subVal = subVal.replace(/ /g,"_");
            var subjectVal = '#'+subVal.toString()+'general';
            $(subjectVal).css('background-color','');
            $(subjectVal).css('color','');
            console.log('inside for:'+subjectVal);
        {% endfor %}
        var sub = selectedSubjectVal.replace(/ /g,"_");
        var subjectVal = '#'+sub.toString()+'general';
        console.log('outside for:'+sub);
        $(subjectVal).css('background-color','lightseagreen');
        $(subjectVal).css('color','white');
        $.ajax({
            url: "/generalSyllabusBooks?board_id=" + selectedBoardID + "&class_val=" + selectedClassVal +
                "&subject_name=" + selectedSubjectVal,
            type: "get",
            data: '',
            success: function (response) {

                var bookHTMLRecords = "";
                if(response){
                responseArr = response.toString().split(',');
                // alert(responseArr);
                var bookHTMLRecords = "";
                for (var i = 0; i < responseArr.length; i++) {
                    //alert(responseArr[i]);
                    var bookID = responseArr[i].toString().split(':')[0];
                    var bookName = responseArr[i].toString().split(':')[1];
                    console.log('inside book syllabus:'+bookID);
                    var parameters = "\"" + selectedSubjectVal +
                        "\"," + bookID+',' + selectedSubjectID + ',' + selectedClassVal + ',' + selectedBoardID;
                        console.log('Books Records in parameters:'+parameters);
                    bookHTMLRecords = bookHTMLRecords +
                        '<a href="javascript:void(0);"><li class="bookItem" style="padding: 10px 5px;" id="'+bookID+'bookGeneral" onClick=generalLoadChapters(' +
                        parameters + '); name=' +
                        selectedBoardID + '>' + bookName +
                        '</li></a>';
                    // bookArray.push(bookID+':'+bookName);
                }
                }else{
                    bookHTMLRecords = bookHTMLRecords +
                    '<li style="padding: 10px 5px;">No data available</li>'
                }
                $("#generalDivBooks").html(bookHTMLRecords);
                $('#generalBookLoader').hide();
                $('#generalDivBooks').show();
                
            },
            error: function (xhr) {
                window.alert("error occurred while fetching book list");
            }
        });
    }
    //$('.subjectItem').click(function () {
        var classforBooks = '';
        var subjectforBooks = '';
        var subjectIdforBooks = '';
        var boardforBooks = '';
    function loadBooks(selectedSubjectVal, selectedSubjectID, selectedClassVal, selectedBoardID) {
        //$('#selected_sub_id').val($(this).attr("name"));
        // alert("We're in load books function " + selectedSubjectVal + selectedClassVal + selectedBoardID);
        selectedSubjectVal = selectedSubjectVal.replace(/_/g," ");
        $('#divBook').hide();
        $('.bookCol').hide();
        $('.remSubject').hide();
        $('.subCol').show();
        $('#msgSubject').hide();
        $('#suggestionBtn').hide();
        $('#inputBtn').hide();
        $('#searchId').hide();
        $('#Bookloader').show(); 
        classforBooks = selectedClassVal;
        subjectforBooks = selectedSubjectVal;
        subjectIdforBooks = selectedSubjectID;
        boardforBooks = selectedBoardID;
        {% for sub in subjectValues %}
            var subVal = "{{sub.description}}";
            subVal = subVal.replace(/ /g,"_");
            var subjectVal = '#'+subVal.toString();
            $(subjectVal).css('background-color','');
            $(subjectVal).css('color','');
            console.log('inside for:'+subjectVal);
        {% endfor %}
        var sub = selectedSubjectVal.replace(/ /g,"_");
        var subjectVal = '#'+sub.toString();
        console.log('outside for:'+subjectVal);
        $(subjectVal).css('background-color','lightseagreen');
        $(subjectVal).css('color','white');
        $.ajax({
            url: "/syllabusBooks?board_id=" + selectedBoardID + "&class_val=" + selectedClassVal +
                "&subject_name=" + selectedSubjectVal,
            type: "get",
            data: '',
            success: function (response) {

                var bookHTMLRecords = "";
                if(response){
                responseArr = response.toString().split(',');
                // alert(responseArr);
                var bookHTMLRecords = "";
                for (var i = 0; i < responseArr.length; i++) {
                    //alert(responseArr[i]);
                    var bookID = responseArr[i].toString().split(':')[0];
                    var bookName = responseArr[i].toString().split(':')[1];
                    console.log('inside book syllabus:'+bookID);
                    var parameters = "\"" + selectedSubjectVal +
                        "\"," + bookID+',' + selectedSubjectID + ',' + selectedClassVal + ',' + selectedBoardID;
                        console.log('Books Records in parameters:'+parameters);
                    bookHTMLRecords = bookHTMLRecords +
                        '<a href="javascript:void(0);"><li class="bookItem" style="padding: 10px 5px;padding-right:15px;" id="'+bookID+'book" onClick=loadChapters(' +
                        parameters + '); name=' +
                        selectedBoardID + '>' + bookName +
                        '</li></a><div class="delIconBooks" onclick=deleteBookFunc('+bookID+'); style="margin-top:-30px;color:forestgreen;"><i class="fas fa-minus-circle" id="deleteIcon"></i></div>';
                    bookArray.push(bookID+':'+bookName);
                }
                }else{
                    bookHTMLRecords = bookHTMLRecords +
                    '<li style="padding: 10px 5px;">No data available</li>'
                }
                $("#bookDiv").html(bookHTMLRecords);
                $('#divBook').show();
                $('.bookCol').show();
                $('#msgBook').hide();
                $('.addBookBtn').hide();
                $('#Bookloader').hide();
            },
            error: function (xhr) {
                window.alert("error occurred while fetching book list");
            }
        });
        
        //});
    }


    function generalLoadChapters(selectedSubjectVal, selectedBookId,selectedSubjectID, selectedClassVal, selectedBoardID){
        $('#generalDivChapters').hide();
        $('#generalChapterLoader').show();
        // classforChapters = selectedClassVal;
        // subjectforChapters = selectedSubjectVal;
        // bookIdforChapters =  selectedBookId;
        // subjectIdforChapters = selectedSubjectID;
        // boardIdforChapters = selectedBoardID;
        {% for book in bookName %}
            var bookNam = '#{{book.book_id}}bookGeneral';
            $(bookNam).css('background-color','');
            $(bookNam).css('color','');
            console.log('inside for:'+bookNam);
        {% endfor %}
        var bookId = '#'+selectedBookId+'bookGeneral';
        console.log('outside for:'+selectedBookId);
        $(bookId).css('background-color','lightseagreen');
        $(bookId).css('color','white');
        $.ajax({
            url: "/generalSyllabusChapters?board_id=" + selectedBoardID + "&class_val=" + selectedClassVal +
                "&subject_id=" + selectedSubjectID + "&book_id=" + selectedBookId + "&subject_val=" +
                selectedSubjectVal,
            type: "get",
            data: '',
            success: function (response) {
                var chapterHTMLRecords = "";
                if(response){
                responseArr = response.toString().split(',');
                // alert(responseArr.length);
                
                // bookIdforChapters = selectedBookId;
                console.log('inside syllabus chapter');
                console.log(response);
                for (var i = 0; i < responseArr.length; i++) {
                    // alert(responseArr[i]);
                    var chapterNum = responseArr[i].toString().split(':')[0];
                    var chapterName = responseArr[i].toString().split(':')[1];
                    // var chapter = responseArr[i].toString().split(':')[1];
                    // alert(chapterNum + " and " + chapterName);
                    var parameters ="\""+chapterName + "\"" + "," + "\"" + selectedSubjectVal +"\"," + selectedSubjectID + "," + selectedClassVal + "," + selectedBoardID+","+chapterNum+","+selectedBookId;
                    chapterHTMLRecords = chapterHTMLRecords +
                    '<a href="javascript:void(0);"><li class="chapterColor chapterItem'+chapterNum+'general" style="padding: 10px 5px;" id="'+chapterName+'" onClick=generalLoadTopics("' + selectedSubjectVal +'",'+ selectedSubjectID + ',' + selectedClassVal + ',' + selectedBoardID+','+chapterNum+','+selectedBookId+'); >' + chapterName +
                            '</li></a><input type="hidden" value="'+chapterName+'" id="inputChapterName">';
                }
                }else{
                    chapterHTMLRecords = chapterHTMLRecords + '<li style="padding: 10px 5px;">No data available</li>'
                }

                $("#generalDivChapters").html(chapterHTMLRecords);
                $('#generalChapterLoader').hide();
                $('#generalDivChapters').show();
                
            },
            error: function (xhr) {
                window.alert("error occurred while fetching book list");
            }
        });
    }
    var classforChapters = '';
    var subjectforChapters = '';
    var bookIdforChapters = '';
    var subjectIdforChapters = '';
    var boardIdforChapters = '';
    var chapterNameforchapter = '';
    function loadChapters( selectedSubjectVal, selectedBookId,selectedSubjectID, selectedClassVal, selectedBoardID) {
        // alert(selectedSubjectID + "this is the subject id");
        // alert(selectedSubjectVal + "this is the subject val");
        
        $('#divChapter').hide();
        $('.chapterCol').hide();
        $('.remBooks').hide();
        $('.bookCol').show();
        $('#suggestionBookBtn').hide();
        $('#inputBookBtn').hide();
        $('#msgBook').hide();
        $('#chapterloader').show();
        classforChapters = selectedClassVal;
        subjectforChapters = selectedSubjectVal;
        bookIdforChapters =  selectedBookId;
        subjectIdforChapters = selectedSubjectID;
        boardIdforChapters = selectedBoardID;
        console.log('inside load chapters:'+bookIdforChapters);  
        {% for book in bookName %}
            var bookNam = '#{{book.book_id}}book';
            $(bookNam).css('background-color','');
            $(bookNam).css('color','');
            console.log('inside for:'+bookNam);
        {% endfor %}
        var bookId = '#'+selectedBookId+'book';
        console.log('outside for:'+selectedBookId);
        $(bookId).css('background-color','lightseagreen');
        $(bookId).css('color','white');
        $.ajax({
            url: "/syllabusChapters?board_id=" + selectedBoardID + "&class_val=" + selectedClassVal +
                "&subject_id=" + selectedSubjectID + "&book_id=" + selectedBookId + "&subject_val=" +
                selectedSubjectVal,
            type: "get",
            data: '',
            success: function (response) {
                var chapterHTMLRecords = "";
                if(response){
                responseArr = response.toString().split(',');
                // alert(responseArr.length);
                
                // bookIdforChapters = selectedBookId;
                console.log('inside syllabus chapter');
                console.log(response);
                for (var i = 0; i < responseArr.length; i++) {
                    // alert(responseArr[i]);
                    var chapterNum = responseArr[i].toString().split(':')[0];
                    var chapterName = responseArr[i].toString().split(':')[1];
                    // var chapter = responseArr[i].toString().split(':')[1];
                    // alert(chapterNum + " and " + chapterName);
                    chapterNameforchapter = chapterName;
                    var parameters ="\""+chapterName + "\"" + "," + "\"" + selectedSubjectVal +"\"," + selectedSubjectID + "," + selectedClassVal + "," + selectedBoardID+","+chapterNum+","+selectedBookId;
                    console.log('inside load chapters:'+parameters);
                    chapterHTMLRecords = chapterHTMLRecords +
                    '<a href="javascript:void(0);"><li class="chapterColor chapterItem'+chapterNum+'" style="padding: 10px 5px;padding-right:15px;" id="'+chapterName+'" onClick=loadTopics("' + selectedSubjectVal +'",'+ selectedSubjectID + ',' + selectedClassVal + ',' + selectedBoardID+','+chapterNum+','+selectedBookId+'); >' + chapterName +
                            '</li><div class="delIconChapter" onclick=deleteChapterFunc('+chapterNum+'); style="margin-top:-30px;color:forestgreen;"><input type="hidden" value="'+chapterName+'" id="inputChapterName"><i class="fas fa-minus-circle" id="deleteIcon"></i></div></a>';
                }
                }else{
                    chapterHTMLRecords = chapterHTMLRecords + '<li style="padding: 10px 5px;">No data available</li>'
                }

                $("#chapterDiv").html(chapterHTMLRecords);
                $('#divChapter').show();
                $('.chapterCol').show();
                $('.addChapterBtn').hide();
                $('#chapterloader').hide();
            },
            error: function (xhr) {
                window.alert("error occurred while fetching book list");
            }
        });
        
    }

    function generalLoadTopics(selectedSubjectVal,  selectedSubjectID, selectedClassVal, selectedBoardID, selectedChapterNum,selectedBookId){
        var s = '.chapterItem'+selectedChapterNum+'general';
        
        $('#generalDivTopics').hide();
        $('#generalTopicLoader').show();
        var chapterName = $('#inputChapterName').val();
        // console.log('Chapter Name:'+chapterName);
        {% for chapter  in chapterNum %}
            var chapterNumber = '.chapterItem{{chapter.chapter_num}}general';
            $(chapterNumber).css('background-color','');
            $(chapterNumber).css('color','');

        {% endfor %}
        $(s).css('background-color','lightseagreen');
        $(s).css('color','white');
        // console.log(chapterName);
        // console.log('Chapter Name:'+chapterName);
        chapterNumforTopics = selectedChapterNum;
        console.log('Inside load Topics');
        console.log('Data:'+selectedSubjectVal+','+selectedSubjectID+','+selectedClassVal+','+selectedBoardID+','+selectedChapterNum);
        $.ajax({
            url: "/generalSyllabusTopics?board_id=" + selectedBoardID + "&class_val=" + selectedClassVal +
                "&subject_id=" + selectedSubjectID + "&chapter_num=" + selectedChapterNum+"&chapterName="+chapterName+"&selectedBookId="+selectedBookId,
            type: "get",
            data: '',
            success: function (response) {
                responseArr = response.toString().split(',');
                //alert(responseArr.length);
                var topicHTMLRecords = "";
                for (var i = 0; i < responseArr.length; i++) {
                    var topicID = responseArr[i].toString().split(':')[0];
                    var topicName = responseArr[i].toString().split(':')[1];
                    //alert(responseArr[i]);
                    topicHTMLRecords = topicHTMLRecords +
                        '<a href="#modal2" class="modal-trigger"><li class="topicItem" style="padding: 10px 5px;" name = "' +
                            topicID + '" id="' + topicID + 'general" onClick=loadQuestions("' + topicID +'",'+selectedClassVal+','+selectedSubjectID+','+selectedBoardID+','+selectedChapterNum+'); >' + topicName +
                        '</li></a>';
                }
                $("#generalDivTopics").html(topicHTMLRecords);
                
                
                $('#generalDivTopics').show();
                $('#generalTopicLoader').hide();
            },
            error: function (xhr) {
                window.alert("error occurred while fetching book list");
            }
        });
    }


    var subjectIdforTopics = '';
    var classforTopics = '';
    var chapterNumforTopics = '';
    var bookIdforTopics = '';
    var subjectIdforTopics = '';
    var boardforTopics = '';
    var chapterNameforBooks = '';
    var topicNameforTopic = '';
    var subjectforTopics = '';
    function loadTopics( selectedSubjectVal,  selectedSubjectID, selectedClassVal, selectedBoardID, selectedChapterNum,selectedBookId) {
        var s = '.chapterItem'+selectedChapterNum;
        // var chapterId = '#'+selectedChapterNum.toString();
        // console.log(chapterId);
        console.log('inside loadTopics:'+selectedBookId);
        subjectIdforTopics = selectedSubjectID;
        subjectforTopics = selectedSubjectVal;
        classforTopics = selectedClassVal;
        chapterNumforTopics = selectedChapterNum;
        bookIdforTopics = selectedBookId;
        boardforTopics = selectedBoardID;
        $('#topicDiv').hide();
        $('.topicCol').hide();
        $('#topicloader').show();
        // var chapterName = $('#inputChapterName').val();
        // var chaptName = this.id;
        // console.log('Chapter Name:'+chaptName);
        {% for chapter  in chapterNum %}
            var chapterNumber = '.chapterItem{{chapter.chapter_num}}';
            $(chapterNumber).css('background-color','');
            $(chapterNumber).css('color','');

        {% endfor %}
        $(s).css('background-color','lightseagreen');
        $(s).css('color','white');
        // console.log(chapterName);
        var chapterName = chapterNameforchapter;
        console.log('Chapter Name:'+chapterName);
        console.log('Inside load Topics');
        console.log('Data:'+selectedSubjectVal+','+selectedSubjectID+','+selectedClassVal+','+selectedBoardID+','+selectedChapterNum);
        $.ajax({
            url: "/syllabusTopics?board_id=" + selectedBoardID + "&class_val=" + selectedClassVal +
                "&subject_id=" + selectedSubjectID + "&chapter_num=" + selectedChapterNum+"&chapterName="+chapterName+"&selectedBookId="+selectedBookId,
            type: "get",
            data: '',
            success: function (response) {
                responseArr = response.toString().split(',');
                //alert(responseArr.length);
                var topicHTMLRecords = "";
                for (var i = 0; i < responseArr.length; i++) {
                    var topicID = responseArr[i].toString().split(':')[0];
                    var topicName = responseArr[i].toString().split(':')[1];
                    //alert(responseArr[i]);
                    topicNameforTopic =  topicName;
                    topicHTMLRecords = topicHTMLRecords +
                        '<a href="#modal2" class="modal-trigger"><li class="topicItem" style="padding: 10px 5px;padding-right:15px;" name = "' +
                            topicID + '" id="' + topicID + 'topic" onClick=loadQuestions("' + topicID +'",'+selectedClassVal+','+selectedSubjectID+','+selectedBoardID+','+selectedChapterNum+'); >' + topicName +
                        '</li></a><div class="delIconTopics" onclick=deleteTopicFunc('+topicID+'); style="margin-top:-30px;color:forestgreen;"><i class="fas fa-minus-circle" id="deleteIcon"></i></div>';
                }
                $("#topicDiv").html(topicHTMLRecords);
                
                
                $('#topicDiv').show();
                $('.topicCol').show();
                $('#topicloader').hide();
            },
            error: function (xhr) {
                window.alert("error occurred while fetching book list");
            }
        });
        
    };

    function loadQuestions(selectedTopicId,selectedClassVal,selectedSubjectID){
        var topicsId = '#'+selectedTopicId.toString()+'topic';
        var topicsIdGeneral = '#'+selectedTopicId.toString()+'general';
        console.log('inside loadQuestions');
        console.log('Topic id:'+selectedTopicId);
        console.log('Chapter num:'+chapterNumforTopics);
        $('.shortDetails').hide();
        $('.dataDetails').hide();
        $('#questionDetailloader').show();
        {% for topic in topicId %}
            var topicIds = '#{{topic.topic_id}}topic';
            $(topicIds).css('background-color','');
            $(topicIds).css('color','');
            
        {% endfor %}
        {% for topic in topicId %}
            var topicIds = '#{{topic.topic_id}}general';
            $(topicIds).css('background-color','');
            $(topicIds).css('color','');
            
        {% endfor %}
        // console.log('outside for:'+topicsId);
        $(topicsId).css('background-color','lightseagreen');
        $(topicsId).css('color','white');
        $(topicsIdGeneral).css('background-color','lightseagreen');
        $(topicsIdGeneral).css('color','white');
        $.ajax({
            url: "/syllabusQuestionsDetails?class_val=" + selectedClassVal +
                "&subject_id=" + selectedSubjectID + "&topic_id=" + selectedTopicId+"&chapter_num="+chapterNumforTopics,
            type: "get",
            data: '',
            success: function(response){
                // var htmlQuestion = '';
                responseArr = response.toString().split(':');
                console.log('Topic name:'+responseArr[0]);
                console.log('No of subjective question:'+responseArr[1]);
                console.log('No of Objective question:'+responseArr[2]);
                console.log('No of Reference content:'+responseArr[3]);
                console.log('Chapter name:'+responseArr[5]);
                $('#board').html('<h5 style="margin-top:0px;margin-left: 5px;font-size:15px;">'+responseArr[4]+'</h5>');
                $('#class').html('<h5 style="margin-top:0px;margin-left: 5px;font-size:15px;">'+selectedClassVal+'</h5>');
                $('#subject').html('<h5 style="margin-top:0px;margin-left: 5px;font-size:15px;">'+subjectforTopics+'</h5>');
                $('#chapter').html('<h5 style="margin-top:0px;margin-left: 5px;font-size:15px;">'+responseArr[5]+'</h5>');
                $('#topic').html('<h5 style="margin-top:0px;margin-left: 5px;font-size:15px;">'+responseArr[0]+'</h5>');
                $('#subQuestion').html('<h4 style="margin-left:10px;">'+responseArr[1]+'</h4>');
                $('#objQuestion').html('<h4 style="margin-left:10px;">'+responseArr[2]+'</h4>');
                $('#refContent').html('<h4 style="margin-left:10px;">'+responseArr[3]+'</h4>');
                $('.shortDetails').show();
                $('.dataDetails').show();
                $('#questionDetailloader').hide();
                
                
            },
            error:function(xhr){

            }
        });
    }

</script>

{% endblock %}