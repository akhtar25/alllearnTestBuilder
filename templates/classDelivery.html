{%extends "layout.html"%} {%block content%}
<div class="container">
  <div class="skin-blue sidebar-mini">
    <aside class="main-sidebar" style="margin-top:15px;">
      <!-- sidebar: style can be found in sidebar.less -->
      
      <section class="sidebar">
        <ul class="sidebar-menu" data-widget="tree">
          {% for singleClass in distinctClasses %}
          <li class="treeview">
            <a href="#">
              <i class="glyphicon glyphicon-education"></i>
              <span>Class {{singleClass[0]}}</span>
              <span class="pull-right-container">
                <span class="label label-primary pull-right">{{singleClass[1]}}</span>
              </span>
            </a>
            <ul class="treeview-menu">
              {% for classsection in classsections %}
              {% if classsection.class_val==singleClass[0] %}
              <li><a href="{{ url_for('classCon',class_val=classsection.class_val, section=classsection.section) }}"><i
                    class="fa fa-circle-o"></i> Section {{classsection.section}}</a></li>
              {% endif %}
              {% endfor %}
            </ul>
          </li>
          {% endfor %}
          <ul>
      </section>
      <!-- /.sidebar -->
    </aside>
  </div>
  <!--------------------------------------------------------------------------------------------->
  <div class="content-wrapper" style="background-color: white;">
    <div class="row" style=" height:800px;">
      <section class="col-xs-8">
        <div class="box">
          <div class="box-header">
            <h3 class="box-title">Book: {{bookDet.book_name}} </h3><span style="padding-left: 10px;"> Class:
              {{currClassSecDet.class_val}} | Topic: {{ topicDet.topic_name }}</span>
          </div>
          <!-- /.box-header -->
          <span id="bookLinkIDSpan" style="display: None;">{{bookDet.book_link}}</span>
          <script src="//mozilla.github.io/pdf.js/build/pdf.js"></script>
          <div style="width: 600px; height: 800px; overflow-y: auto">
            <canvas id="the-canvas"></canvas>
          </div>
          <div id="controls" style="padding-right:20px;">
            <button id="prev" class="btn btn-primary">Previous</button>
            <span class="right">Page: <span id="page_num"></span> / <span id="page_count"></span></span>
            <button id="next" class="btn btn-primary">Next</button>
            &nbsp; &nbsp;
            <button id="zoomoutbutton" class="btn btn-primary">-</button>
            <button id="zoominbutton" class="btn btn-primary">+</button>
            <a href="{{bookDet.book_link}}" target="_blank"><button id="zoominbutton" class="btn btn-primary">Open in
                full screen</button></a>
          </div>
          <br>
          <br>
        </div>
      </section>
      <section class="col-md-4">
        <form method="POST" action="/feedbackCollection">
          <ul data-widget="tree">
              <li class="treeview">
                <a href="#"><div class="box box-info"><h3>Topics</h3></div></a>
              <ul class="treeview-menu">
                 <li>
                    <div class="box-body" id="content">
                        <div id="tableData" class="table-responsive scrollableDiv" style="height: 700px;position: relative;">
                          <table>
                            <tbody>
                              <ul class="treeview-menu">
                                <li><a href="">Base</a></li>
                              </ul>
                                <ul class="treeview-menu">
                                    <li>
                              {% for topic in topicTrackerDetails %}
                              
                              <a><tr>
                                <label>
                                  {% if topic.is_covered=='Y' %}
                                  <input type="checkbox" class="c1" onclick="checkedBox();" name="topicCheck" checked="checked" value="{{ topic.topic_id }}" disabled>
                                  {% else %}
                                  <input type="checkbox" class="c1" onclick="checkedBox();" name="topicCheck" value="{{ topic.topic_id }}">
                                  {% endif %}
                                  <span style="font-size: 12px;font-family: Arial"
                                    class="text-grey">{{topic.chapter_num}}-{{topic.chapter_name}} - {{ topic.topic_name }} </span>
                                </label>
                                <input type="text" name="subject_id" value="{{ topic.subject_id }} " style="display: none;">
                              </tr></a>
                              {% endfor %}
                              </li>
                              <!-- <input class="btn btn-primary" id="feedBackBtn" type="submit" value="Collect Feedback" style="height:40px;width:260px;background-color:green;" disabled> -->
                              </ul>
                            </tbody>
                          </table>
                        </div>
                        <input class="btn btn-primary" id="feedBackBtn" type="submit" value="Collect Feedback" style="height:40px;width:260px;background-color:green;" disabled>
                      </div>
                  </li>
              </ul>
            </li>
            <li class="treeview">

                <a href="#"><h3>Reference</h3></a>
              <ul class="treeview-menu">
                 <li>
                    <h3 ></h3>
                  </li>
              </ul>
            </li>
          </ul>
          <div class="box-footer">
              <div id="modal1" class="modal">
                  <div class="modal-content">
                    <h4 style="float: left;">Add Content</h4>
                    
                  <div class="modal-footer">
                    <a href="#!" class="modal-close waves-effect waves-green btn-flat">Add</a>
                  </div>
                  </div>
                </div>
              <input class="btn btn-primary modal-trigger" data-target="modal1" onclick="addContentId();" value="Add Content" style="background-color:green;height:40px;margin-left: -10px;width: 290px;border-radius: 5px;">
            <input type="text" name="class_val" value="{{ currClassSecDet.class_val }}" style="display: none;">
            <input type="text" name="section" value="{{ currClassSecDet.section }} " style="display: none;">
          </div>
        </form>
      </section>
    </div>
  </div>
</div>
<link rel="stylesheet" href="../static/css/skins/_all-skins.min.css">
<script src="../static/js/pdfLoader.js"></script>
<script>
$('html, body').animate({
    scrollTop: $(".form-elem").offset().top
  }, 2000);
  
  function addContentId(){
    console.log('Inside addContentId');
    $('.modal').modal();
  };

  document.addEventListener('DOMContentLoaded', function() {
    var elems = document.querySelectorAll('.modal');
    var instances = M.Modal.init(elems, options);
  });

  // Or with jQuery

  $(document).ready(function(){
    $('.modal').modal();
  });


    function checkedBox(){
     var anyBoxesChecked = false;
     var check1 = document.getElementsByName('topicCheck');
     if($('.c1:checked').not(':disabled').length == 0){
        anyBoxesChecked = true;
       $("#feedBackBtn").attr("disabled", true);
       console.log('Inside unchecked');
     }else{
      $("#feedBackBtn").attr("disabled", false);
      console.log('Inside checked');
     }
};
  </script>
{%endblock%}