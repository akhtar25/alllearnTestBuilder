{%extends "layout.html"%} {%block content%}
<style>
    #myInput {

        background-position: 10px 12px;
        background-repeat: no-repeat;
    }

    #myUL li a {
        border: 1px solid #ddd;
        margin-top: -1px;
        /* Prevent double borders */
        background-color: #f6f6f6;
        padding: 5px;
        text-decoration: none;
        font-size: 14px;
        color: black;
        display: block
    }

    #myUL li a:hover:not(.header) {
        background-color: #eee;
    }
</style>
<link href="../static/css/jquery.magicsearch.css" rel="stylesheet">
<div class="container">
    <div class="row">
        <div class="col-sm-8">
            <h2 class="">Add/Edit Course</h2>
            <!--<p class="grey-text text-darken-3 lighten-3" style="font-size: 16px;">
        </p>-->
        <form id="courseForm">
            <h4 style="margin-top: 15px;">Course Name</h4>
            <input type="text" name="course" id="course" onblur="courseAdd();"/>
            <input type="hidden" name="courseId" id="courseId" />
            <h4>Description</h4>
            <textarea id="w3review" name="description" style="height: 6em;"></textarea>
            <div>
                <h3 class="">Next Batch</h3>
                <div class="col-sm-4">
                    Set Date: <input type="text" name="setDate" class="datepicker">
                </div>
                <div class="col-sm-4" >
                    Start Time: <input type="text" name="startTime" class="timepicker" >
                </div> 
                <div class="col-sm-4">
                    End Time: <input type="text" name="endTime" class="timepicker">
                </div>
            </div>
            <div>
                Days of week<br>
                <p style="font-family: Arial;">
                    <label>
                        <input type="checkbox" value="Mo" name="Days" />
                        <span>Mo</span>
                    </label>&nbsp;&nbsp;&nbsp;&nbsp;

                    <label>
                        <input type="checkbox" value="Tu" name="Days" />
                        <span>Tu</span>
                    </label>&nbsp;&nbsp;&nbsp;&nbsp;

                    <label>
                        <input type="checkbox" value="We" name="Days" />
                        <span>We</span>
                    </label>&nbsp;&nbsp;&nbsp;&nbsp;

                    <label>
                        <input type="checkbox" value="Th" name="Days" />
                        <span>Th</span>
                    </label>&nbsp;&nbsp;&nbsp;&nbsp;

                    <label>
                        <input type="checkbox" value="Fr" name="Days" />
                        <span>Fr</span>
                    </label>&nbsp;&nbsp;&nbsp;&nbsp;

                    <label>
                        <input type="checkbox" value="Sa" name="Days" />
                        <span>Sa</span>
                    </label> &nbsp;&nbsp;&nbsp;&nbsp;

                    <label>
                        <input type="checkbox" value="Su" name="Days" />
                        <span>Su</span>
                    </label>&nbsp;&nbsp;&nbsp;&nbsp;
                </p>
                <!--<a class="btn">Mo</a>
            <a class="btn">Tu</a>
            <a class="btn">We</a>
            <a class="btn">Th</a>
            <a class="btn">Fr</a>
            <a class="btn">Sa</a>
            <a class="btn">Su</a>-->
            </div>
            <!--<button class="btn green right" style="width: 100%;">Enroll</button>-->
            <br><br>

            <h3 class="">What to expect</h3>
            <p>Upload a short 2 min video of what the students should expect
                <!--<video src="../static/images/vid1.m4v" width="100%" controls></video>-->
                <input type="file" id="video_url" onchange="initUpload();" name="video_url" style="height: 30px; margin-top: 10px;">
                <input type="hidden" id="videoUrl" name="videoUrl">
                <br>
                <div class="center">
                    <span id="video_name">Sample Video</span><br>
                    <video src="../static/images/vid1.m4v" id="preview" class="" width="50%" controls></video>
                </div>
            </p>
            <br>

            <!--Section to add topics-->
            <h3 class="">Topics</h3>
            <div>
                <input type="text" id="myInput" onkeyup="myFunction()" placeholder="Search for topics.."
                    title="Type in a topic" style="width:90%;"><i class="material-icons black-text right"
                    style="font-size: medium;cursor: pointer;" id="searchIcon">search</i>
            </div>
            <div class="" style="overflow-y: auto;height: 150px;">
                <ul id="myUL">
                    <li><a class="modal-trigger" href="#topicAddModal">Topic15</a></li>

                </ul>
            </div>
            <div id="newTopicBtnDiv" class="right">
                Can't find topic? <a class="modal-trigger" href="#topicAddModal" id="topicModal"><i class="material-icons black-text"
                        style="font-size: medium;">add_box</i> Add new</a>
            </div>
            <span style="display: flex;"><h4>Added Topics</h4><a onclick="topicList();" style="margin-left: 20px;margin-top: 10px;cursor: pointer;"><i class="fa fa-refresh" aria-hidden="true"></i></a></span>
            <table class="highlight">
                <thead>
                    <tr>
                        <th>Topic</th>
                        <th>Quiz Questions</th>
                        <!-- <th>Expected class date</th> -->
                        <th>Delete</th>
                    </tr>
                </thead>
                <tbody style="font-size:medium" id="topicListDiv">
                    <tr>
                        <td><a class="modal-trigger" onclick="editTopic('2891');" href="#topicAddModal">Polynomial</a>
                        </td>
                        
                        <td>5</td>
                        
                        <td><a title="Delete Need" name="" href="#"
                                class=" btn-floating btn-small orange deleteBTNClass">
                                <i class="material-icons small">delete</i></a></td>
                    </tr>
                    <tr>
                        <td><a class="modal-trigger" href="#topicAddModal">Forms of DS</a></td>
                        <!--<td>2</td>-->
                        <td>5</td>
                        <td>27nd Jan 2020</td>
                        <td><a title="Delete Need" name="" href="#"
                                class=" btn-floating btn-small orange deleteBTNClass">
                                <i class="material-icons small">delete</i></a></td>
                    </tr>
                    <tr>
                        <td><a class="modal-trigger" href="#topicAddModal">Number patterns</a></td>
                        <!--<td>2</td>-->
                        <td>5</td>
                        <td>05 Aug 2020</td>
                        <td><a title="Delete Need" name="" href="#"
                                class=" btn-floating btn-small orange deleteBTNClass">
                                <i class="material-icons small">delete</i></a></td>
                    </tr>
                    <tr class="">
                        <td><a class="modal-trigger" href="#topicAddModal">Why use Python</a></td>
                        <!--<td>2</td>-->
                        <td>5</td>
                        <td>09 Aug 2020 - <span class="green-text"><b>Ongoing</b></span></td>
                        <td><a title="Delete Need" name="" href="#"
                                class=" btn-floating btn-small orange deleteBTNClass">
                                <i class="material-icons small">delete</i></a></td>
                    </tr>
                    <tr>
                        <td><a class="modal-trigger" href="#topicAddModal">Numpy</a></td>
                        <!--<td>2</td>-->
                        <td>5</td>
                        <td>04 Sept 2020</td>
                        <td><a title="Delete Need" name="" href="#"
                                class=" btn-floating btn-small orange deleteBTNClass">
                                <i class="material-icons small">delete</i></a></td>
                    </tr>
                    <tr>
                        <td><a class="modal-trigger" href="#topicAddModal">Uses of Data science</a></td>
                        <!--<td>2</td>-->
                        <td>5</td>
                        <td>09 Sept 2020</td>
                        <td><a title="Delete Need" name="" href="#"
                                class=" btn-floating btn-small orange deleteBTNClass">
                                <i class="material-icons small">delete</i></a></td>
                    </tr>
                </tbody>
            </table>
            <br>


            <!--<img src="../static/images/reviewIMG.PNG" width="50%">-->

            <h3 class="">Ideal for</h3>
            <input class="magicsearch" name="idealfor" id="topicSearch" placeholder="Search categories...">
            <!--
            <p>Press Enter after each group name<div class="chips"></div>
            </p>-->
            <br><br>
            <h3>Difficulty Level</h3>
            <p>
                <div class="input-field">
                    <select id="class_val" name="level">
                        <option value="Easy" selected>Easy</option>
                        <option value="Medium">Medium</option>
                        <option value="Hard">Hard</option>
                        <!--<option value="11">11</option>
                    <option value="12">12</option>-->
                    </select>
                </div>
            </p>
            <p style="margin-top:20px;">
                <label>
                  <input type="checkbox" id="private" name="private" value="Y" />
                  <span>Do you want to make your course private?</span>
                </label>
              </p>
            <a href="#" class="btn green" id="save">Save</a>
            <a href="#" class="btn green right">Save and Publish Course</a>
            
        </form>
        <span id="msg" style="margin-top: 20px;color: red;"></span>
        </div>
        <div class="col-sm-4">

            <div class=""
                style="background-color: rgb(248, 248, 231);border-radius: 25px;border: 2px solid rgb(226, 223, 223);padding: 10px; ">
                <ul style="margin-left: 20px;margin-top:10px;font-size:medium">
                    <h3>Things to keep in mind</h3>
                    <li style="list-style-type: initial;">
                        Keep the content light and interactive
                    </li>
                    <li style="list-style-type: initial;">
                        It's okay if you don't know how or where to start. Let this be a starting point.
                    </li>
                    <li style="list-style-type: initial;">Don't try to cover everything in one course. If there's a lot
                        you want to share, split in multiple courses</li>
                    <li style="list-style-type: initial;">Do not keep a single class more than 1 hour at a stretch. Even
                        if you want, keep a 10-20 min break in between</li>
                    <li style="list-style-type: initial;">Try to site as many examples as possible. This helps the
                        students connect content with practice.</li>
                    <li style="list-style-type: initial;">Ensure that you add a couple of questions with each topic.
                        This helps the students solidify their understanding of what's been taught</li>
                    <li style="list-style-type: initial;">The 'What to expect' video should be a summary of all that
                        will be covered during the course.</li>
                    <li style="list-style-type: initial;">Always be punctual</li>
                    <br>
                    <h4>FAQs</h4>
                    <li style="list-style-type: initial;">
                        <b>What if my class is not up to the mark?</b>
                        <br> There are two ways the users can express themselves: Reviews and Donations.<br>
                        Take their help to gather feedback for improvement. JUST GET STARTED.
                    </li>
                    <li style="list-style-type: initial;"><b>I don't know what to teach</b>
                        <br>All of us have something we can teach to others.<br>
                        Sometimes your learnings could be just about what not to do.
                    </li>
                    <li style="list-style-type: initial;">
                        <b>What if a topic can't be covered in a single 1 hour class</b><br>
                        If a topic can't be covered in a single class, split it in multiple classes. eg Data Structures
                        - part 1 <i>and </i>Data Structures - part 2</li>
                    <li style="list-style-type: initial;">
                        <b>How will I receive the donations?</b><br>
                        We'll be transferring them within 2 days of us receiving the donations to your bank account.
                    </li>
                    <li style="list-style-type: initial;">
                        <b>Can I raise funds for someone else?</b><br>
                        Definitely, in fact we encourage that. If you're raising funds for someone through your classes,
                        the money will be transferred directly to their account.
                        <br> 
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!--Modal section-->
<div class="modal" id="topicAddModal">
    <div class="modal-content" style="height: 100%;">
    <div class="col lg s6" id="unselect">
            <ul class="tabs">
                <li class="tab col s3">
                    <a href="javascript:void(0);" id="topic" class="tabFont">Review and Add Topic</a>
                </li>
                <li class="tab col s3">
                    <a href="javascript:void(0);" id="notes" class="tabFont">Review and Add Notes</a>
                </li>
            </ul>
    </div>
    <div id="section1" style="margin-top:10px;height: 90%;position: relative;">
        <div>
            <!-- <h4>Review and Add Topic</h4> -->
            <input type="text" value="" style="font-size: xx-large;" id="topicName" placeholder="Topic Name">
            <!-- <label for="topicDesc">Description (optional)</label> -->
            <!-- <input type="text" placeholder="Description" id="topicDesc" style="width: 70%;"> -->
            <!--<textarea id="topicDesc" style="height: 50px;"></textarea>-->
            <br>
            <span style="font-size: large;">Questions</span>
            <a class="newQuestion" href="#">Add New Question</a>
            <div id="questionDiv" style="height: 220px;overflow-y: auto;border-radius: 10px;border: 2px solid rgb(226, 223, 223);padding: 10px; ">
                <div>
                    <table id="quesForm">
                        <!-- <tr>
                            <td>
                                <h4>How to create a system of profiles?</h4>
                                <ul>
                                    <li>Option 1</li>
                                    <li>Option 2</li>
                                    <li>Option 3</li>
                                    <li>Option 4</li>
                                </ul>
                            </td>
                            <td><a title="Delete Need" name="" href="#"
                                    class=" btn-floating btn-small orange deleteBTNClass">
                                    <i class="material-icons small">delete</i></a></td>
                        </tr> -->
                    </table>
                    <table id="questionList">

                    </table>
                </div>
            </div>
            <div>
                <button class="btn green right" id="saveTopic" style="margin-top: 8px;">Save Topic</button>
            </div>
        </div>        
    </div>
    <div id="section2">
        <h3 class="" style="margin-top: 10px;">Upload Notes</h3>
            <p>
                <!--<video src="../static/images/vid1.m4v" width="100%" controls></video>-->
                <input type="file" id="video_notes_url" onchange="initUpload();" name="video_url" style="height: 30px; margin-top: 10px;">
                <input type="hidden" id="videoNotesUrl" name="videoNotesUrl">
        <div class="center">
            <span id="video_name">Sample Video</span><br>
            <video src="../static/images/vid1.m4v" id="preview" class="" width="50%" controls></video>
        </div>
        </p>
        <button class="btn green" style="margin-top: 8px;margin-left: 270px;">Save Notes</button>
    </div>
    </div>
</div>
<!--End of modal section-->


<script>

    $('#topicModal').click(function(){
        console.log('inside topic modal');
        quesIDList = [];
        $('#quesForm').html('');
        $('#questionList').html('');
        $('#topicName').val('');
        questionDiv = '';
        quesListDiv = '';
    });

    $('.newQuestion').click(function(){
        $('.newQuestion').hide();
    });

function correctOption(correct){
      document.getElementById('correct').value=correct.value; 
    }
    var questionDiv = '';
    $('.newQuestion').click(function(){
        console.log('add new question');
        questionDiv = questionDiv + '<tr><td><input type="text" id="questionInput" placeholder="Write Question"><ul><li><label><input class="with-gap" id="optionRad1" name="optionChoice" type="radio" value="1" onclick="correctOption(this);"><span><input type="text" style="width:200px;" placeholder="Option 1" id="option1" class="option_class" name="option_desc"></span></label></li><li><label><input class="with-gap" id="optionRad2" name="optionChoice" type="radio" value="2" onclick="correctOption(this);"><span><input type="text" style="width:200px;" placeholder="Option 2" id="option2" class="option_class" name="option_desc"></span></label></li><li><label><input class="with-gap" id="optionRad3" name="optionChoice" type="radio" value="3" onclick="correctOption(this);"><span><input type="text" style="width:200px;" placeholder="Option 3" id="option3" class="option_class" name="option_desc"></span></label></li><li><label><input class="with-gap" id="optionRad4" name="optionChoice" type="radio" value="4" onclick="correctOption(this);"><span><input type="text" style="width:200px;" placeholder="Option 4" id="option4" class="option_class" name="option_desc"></span></label></li></ul></td><td><input type="hidden" id="correct" name="correct" value=""><button class="btn green" style="float:right;" onclick="addQues();">Add Question</button></td></tr>';
        $('#quesForm').html(questionDiv);
    });
    var quesIDList = [];
    function addQues(){
        console.log('inside addQues');
        var corr = $('#correct').val();
        var ques = $('#questionInput').val();
        var opt1 = $('#option1').val();
        var opt2 = $('#option2').val();
        var opt3 = $('#option3').val();
        var opt4 = $('#option4').val();
        $.ajax({
            url:"/addNewQuestion?ques="+ques+"&opt1="+opt1+"&opt2="+opt2+"&opt3="+opt3+"&opt4="+opt4+"&corr="+corr,
            type:"POST",
            data: "",
            success:function(response){
                console.log(response);
                quesIDList.push(response);
                var flag = '1';
                fetchQuestions(quesIDList,flag);
                console.log('data added successfully');
                
            },
            error:function(xhr){
                $('#msg').html('Error to submit question data');
            }
        });
    }
    var quesListDiv = '';
    function fetchQuestions(QuesList,indic){
        console.log('inside fetchQuestions');
        console.log(QuesList);
            var QuesList = JSON.stringify(QuesList);
            $.ajax({
            url:"/fetchQuesList?indic="+indic,
            type:"POST",
            contentType:"application/json",
            data: QuesList,
            success:function(response){
                $('.with-gap').prop("checked",false);
                $('#option1').val('');
                $('#option2').val('');
                $('#option3').val('');
                $('#option4').val('');
                $('#questionInput').val('');
                var question = response.toString().split(':')[0];
                var op1 = response.toString().split(':')[1];
                var op2 = response.toString().split(':')[2];
                var op3 = response.toString().split(':')[3];
                var op4 = response.toString().split(':')[4];
                var corrOpt = response.toString().split(':')[5];
                console.log(question+' : '+op1+' : '+op2+' : '+op3+' : '+op4+' : '+corrOpt);
                quesListDiv = quesListDiv + '<tr><td style="padding-top:10px;"><h4 style="margin-left:5px;">'+question+'</h4><ul style="margin-left:7px;"><li>'+op1+'<span id="'+op1+'"></span></li><li>'+op2+'<span id="'+op2+'"></span></li><li>'+op3+'<span id="'+op3+'"></span></li><li>'+op4+'<span id="'+op4+'"></span></li></ul></td></tr>';
                var ids = '#'+corrOpt;
                console.log(ids);
                $('#questionList').html(quesListDiv);
                $(ids).html('<i class="fa fa-check" style="color:green;font-size:15px;margin-left:10px;" aria-hidden="true"></i>');
            },
            error:function(xhr){
                $('#msg').html('Error to submit course data');
            }
        });
    }

    $(document).ready(function () {
        $('.parallax').parallax();
        $('.modal').modal();
        $('.datepicker').datepicker();
        $('.timepicker').timepicker();
        $('.chips').chips();
        dat = [];
        k=0;
        {% for des in desc %}
            var a = [];
            dict = {
                id:'{{des}}',
                firstName:'{{des}}'
            }
            dat.push(dict);
            k=k+1;
        {% endfor %}
        $('select').formSelect();
        $('#topicSearch').magicsearch({
            
            dataSource: dat,
            fields: ['firstName'],
            id: 'id',
            format: '%firstName%',
            multiple: true,
            multiField: 'firstName',
            dropdownMaxItem: 8,
            multiStyle: {
                space: 5,
                width: 150
            },
            focusShow: true
        });
    });
</script>
<script>
    function myFunction() {
        var input, filter, ul, li, a, i, txtValue;
        input = document.getElementById("myInput");
        filter = input.value.toUpperCase();
        ul = document.getElementById("myUL");
        li = ul.getElementsByTagName("li");
        for (i = 0; i < li.length; i++) {
            a = li[i].getElementsByTagName("a")[0];
            txtValue = a.textContent || a.innerText;
            if (txtValue.toUpperCase().indexOf(filter) > -1) {
                li[i].style.display = "";
            } else {
                li[i].style.display = "none";
            }
        }
    }

    $('#save').click(function($e){
        alert('Inside save click function');
        $e.preventDefault();
        var form = $('#courseForm');
        var idealfor = $('#topicSearch').attr('data-id');
        console.log('Data:'+idealfor);
        var course_status = "Draft";
        var course_id = $('#courseId').val();
        $.ajax({
            url:"/saveCourse?course_status="+course_status+"&idealfor="+idealfor+"&course_id="+course_id,
            type:"POST",
            data: form.serialize(),
            success:function(response){
                if(response){
                    console.log('data added successfully');
                    // $('#courseId').val(response);
                }
            },
            error:function(xhr){
                $('#msg').html('Error to submit course data');
            }
        });
    });

    // Upload File Start
    function uploadFile(file, s3Data, url){
      const xhr = new XMLHttpRequest();
      xhr.open('POST', s3Data.url);
      xhr.setRequestHeader('x-amz-acl', 'public-read');
      const postData = new FormData();
      for(key in s3Data.fields){
        postData.append(key, s3Data.fields[key]);      
      }
      postData.append('file', file);
      xhr.onreadystatechange = () => {
        if(xhr.readyState === 4){
          if(xhr.status === 200 || xhr.status === 204){
            console.log(url);
            document.getElementById('preview').src = url;
            document.getElementById('videoUrl').value=url;
          }
          else{
            //window.alert("this is where the problem is");
            $('#errorMSGSpan').html('Could not upload file.');
            //alert('Could not upload file.');
          }
        }
      };
      xhr.send(postData);
    }
    function getSignedRequest(file){
      const xhr = new XMLHttpRequest();
      var type = file.type;
      var VideoName = file.name;
      console.log('File Name:'+type);
      console.log('file type:'+VideoName);
      $('#video_name').html(VideoName);
      xhr.open('GET', `/sign-s3?file-name=${VideoName}&file-type=${type}&folder=courseVideo`);
      xhr.onreadystatechange = () => {
        if(xhr.readyState === 4){
          if(xhr.status === 200){
            const response = JSON.parse(xhr.responseText);
            uploadFile(file, response.data, response.url);
          } 
          else{
            $('#errorMSGSpan').html('Could not get signed URL.');           
          }
        }
      };
      xhr.send();
    }
    function initUpload(){
      const files = document.getElementById('video_url').files;
      const file = files[0];
      if(!file){
        return alert('No file selected.');
      }
      console.log('FileName:'+file);
      getSignedRequest(file);
    }
    // End

    function topicList(){
        var courseId = $('#courseId').val();
        $.ajax({
            url:"/fetchQues?courseId="+courseId,
            type:"POST",
            data: "",
            success:function(response){
                if(response){
                    var responseArr = response.toString().split(',');
                    var topicList = '';
                    for(var i=0;i<responseArr.length;i++){
                        var topicName = responseArr[i].toString().split(':')[0];
                        var quesNo = responseArr[i].toString().split(':')[1];
                        var topicId = responseArr[i].toString().split(':')[2]; 
                        console.log('Topic name:'+topicName);
                        console.log('QuesNo:'+quesNo);
                        console.log('TopicId:'+topicId);
                        topicList = '<tr><td><a class="modal-trigger" onclick="editTopic('+topicId+');" href="#topicAddModal">'+topicName+'</a></td><td>'+quesNo+'</td><td><a title="Delete Need" name="" href="#" class=" btn-floating btn-small orange deleteBTNClass"><i class="material-icons small">delete</i></a></td></tr>' + topicList;
                    }
                    $('#topicListDiv').html(topicList);
                    
                }
            },
            error:function(xhr){
                $('#msg').html('Error to submit course data');
            }
        });
    }

    $(document).ready(function(){
        $('.tabs').tabs();
        $('#section1').show();
        $('#section2').hide();
        // var courseId = $('#courseId').val();
        // $.ajax({
        //     url:"/fetchTopicsQues?courseId="+courseId,
        //     type:"POST",
        //     data: "",
        //     success:function(response){
        //         if(response){
        //             var responseArr = response.toString().split(',');
        //             for(var i=0;i<responseArr.length;i++){
        //                 var topicName = responseArr[i].toString().split(':')[0];
        //                 var quesNo = responseArr[i].toString().split(':')[1];
        //                 console.log('Topic name:'+topicName);
        //                 console.log('QuesNo:'+quesNo);
        //             }
                    
        //         }
        //     },
        //     error:function(xhr){
        //         $('#msg').html('Error to submit course data');
        //     }
        // });

    });
    $('#topic').click(function(){
        $('#section1').show();
        $('#section2').hide();
    });
    $('#notes').click(function(){
        $('#section2').show();
        $('#section1').hide();
    });

    $('#searchIcon').click(function(){
        var topic = $('#myInput').val();
        $.ajax({
            url:"/searchTopic?topic="+topic,
            type:"POST",
            data: "",
            success:function(response){
                var topicList = '';
                if(response){
                    var responseArr = response.toString().split(',');
                    console.log('if response is not null');
                    
                    for(var i=0;i<responseArr.length;i++){
                        var topic_id = responseArr[i].toString().split(':')[0];
                        var topic_name = responseArr[i].toString().split(':')[1];
                        topicList = topicList + '<li><a class="modal-trigger" id="'+topic_id+'" href="#topicAddModal">'+topic_name+'</a></li><input type="hidden" id="'+topic_id+'" value="'+topic_name+'">';
                    }
                    $('#myUL').html(topicList);
                }else{
                    topicList = 'No Data Available';
                }
                $('#myUL').html(topicList);
            },
            error:function(xhr){
                $('#msg').html('Error to submit course data');
            }
        });
    }); 

    $('#saveTopic').click(function(){
        $('#quesForm').html('');
        questionDiv = '';
        $('.newQuestion').show();
        var topicName = $('#topicName').val();
        var courseId = $('#courseId').val();
        console.log('Topic Name:'+topicName);
        console.log('courseId:'+courseId);
        console.log('list of question ids');
        console.log(quesIDList);
        quesIDList = JSON.stringify(quesIDList);
        $.ajax({
            url:"/addCourseTopic?topicName="+topicName+"&courseId="+courseId,
            type:"POST",
            contentType:"application/json",
            data: quesIDList,
            success:function(response){
                if(response=='1'){
                    M.toast({html: 'Topic added successfully'});
                }
            },
            error:function(xhr){
                $('#msg').html('Error to submit course data');
            }
        });
    });

    function editTopic(topic_id){
        $.ajax({
            url:"/fetchTopicQues?topic_id="+topic_id,
            type:"POST",
            data: "",
            success:function(response){
                if(response){
                    var responseArr = response.toString().split(',');
                    var quesListDiv = '';
                    for(var i=0;i<responseArr.length;i++){
                        var ques = responseArr[i].toString().split(':')[0];
                        var topic_name = responseArr[i].toString().split(':')[1];
                        var opt1 = responseArr[i].toString().split(':')[2];
                        var opt2 = responseArr[i].toString().split(':')[3];
                        var opt3 = responseArr[i].toString().split(':')[4];
                        var opt4 = responseArr[i].toString().split(':')[5];
                        console.log('Question:'+ques);
                        console.log('op1:'+opt1);
                        console.log('op2:'+opt2);
                        console.log('op3:'+opt3);
                        console.log('op4:'+opt4);
                        console.log('topic name:'+topic_name);
                        $('#topicName').val(topic_name);
                        quesListDiv = quesListDiv + '<tr><td style="padding-top:10px;"><h4 style="margin-left:5px;">'+ques+'</h4><ul style="margin-left:7px;"><li>'+opt1+'<span id="'+opt1+'"></span></li><li>'+opt2+'<span id="'+opt2+'"></span></li><li>'+opt3+'<span id="'+opt3+'"></span></li><li>'+opt4+'<span id="'+opt4+'"></span></li></ul></td></tr>';
                        // var ids = '#'+corrOpt;
                        // console.log(ids);
                        
                        // $(ids).html('<i class="fa fa-check" style="color:green;font-size:15px;margin-left:10px;" aria-hidden="true"></i>');
                    }
                    $('#questionList').html(quesListDiv);
                    
                }
            },
            error:function(xhr){
                $('#msg').html('Error to submit course data');
            }
        });
    }

    function courseAdd(){
        console.log('inside course add');
        var course = $('#course').val();
        $.ajax({
            url:"/courseEntry?course="+course,
            type:"POST",
            data: "",
            success:function(response){
                console.log('success:'+response);
                $('#courseId').val(response);
            },
            error:function(xhr){

            }
        });
    }
</script>
{%endblock%}